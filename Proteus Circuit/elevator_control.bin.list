EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
elevator_control.bin -- emu8086 assembler version: 4.08  
 
[ 18-04-2021  --  01:59:29 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       #make_bin#
[   2]        :                                       
[   3]        :                                       #LOAD_SEGMENT=FFFFh#
[   4]        :                                       #LOAD_OFFSET=0000h#
[   5]        :                                       
[   6]        :                                       #CS=0000h#
[   7]        :                                       #IP=0000h#
[   8]        :                                       
[   9]        :                                       #DS=0000h#
[  10]        :                                       #ES=0000h#
[  11]        :                                       
[  12]        :                                       #SS=0000h#
[  13]        :                                       #SP=FFFEh#
[  14]        :                                       
[  15]        :                                       #AX=0000h#
[  16]        :                                       #BX=0000h#
[  17]        :                                       #CX=0000h#
[  18]        :                                       #DX=0000h#
[  19]        :                                       #SI=0000h#
[  20]        :                                       #DI=0000h#
[  21]        :                                       #BP=0000h#
[  22]        :                                       
[  23]    0000: E9 FD 03                              jmp st1
[  24]    0003: 90                                    nop
[  25]    0004: 00 00 00 00 00 00 00 00 00 00 00 00   db 28 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  26]        :                                       
[  27]        :                                       ; int 08h for 1 shot timer
[  28]    0020: 5F 04                                 dw os_isr
[  29]    0022: 00 00                                 dw 0
[  30]        :                                       
[  31]        :                                       ; int 09h for keyboard
[  32]    0024: 66 04                                 dw key_isr
[  33]    0026: 00 00                                 dw 0
[  34]        :                                       
[  35]        :                                       ; int 10h for Coarse Sensor 2
[  36]    0028: 13 05                                 dw cs2_isr
[  37]    002A: 00 00                                 dw 0
[  38]        :                                       
[  39]        :                                       ; int 11h for Coarse Sensor 1
[  40]    002C: 3A 05                                 dw cs1_isr
[  41]    002E: 00 00                                 dw 0
[  42]        :                                       
[  43]        :                                       ; int 12h for Fine Sensor
[  44]    0030: 64 05                                 dw fs_isr
[  45]    0032: 00 00                                 dw 0
[  46]        :                                       
[  47]        :                                       ; int 13h to int 255h not used
[  48]    0034: 00 00 00 00 00 00 00 00 00 00 00 00   db 972 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                                                    
[  49]        :                                       
[  50]    0400: FA                                    st1: cli
[  51]        :                                       ;rom1 : 00000 - 00fff
[  52]        :                                       ;ram1 : 01000 - 01fff
[  53]        :                                       ;rom2 : ff000 - fffff
[  54]        :                                       
[  55]        :                                       ; intialize ds, es, ss to start of RAM
[  56]    0401: B8 00 01                              mov ax,0100h
[  57]    0404: 8E D8                                 mov ds,ax
[  58]    0406: 8E C0                                 mov es,ax
[  59]    0408: 8E D0                                 mov ss,ax
[  60]    040A: BC FE 1F                              mov sp,01ffeH
[  61]        :                                       
[  62]        :                                       porta equ 0b0h
[  63]        :                                       portb equ 0b2h
[  64]        :                                       portc equ 0b4h
[  65]        :                                       portcreg equ 0b6h
[  66]        :                                       
[  67]        :                                       conv25 equ 80h
[  68]        :                                       conv10 equ 82h
[  69]        :                                       pwm equ 84h
[  70]        :                                       convcreg equ 86h
[  71]        :                                       
[  72]        :                                       ostimer0 equ 90h
[  73]        :                                       ostimer1 equ 92h
[  74]        :                                       oscreg equ 96h
[  75]        :                                       
[  76]        :                                       intloc1 equ 0A0h
[  77]        :                                       intloc2 equ 0A2h
[  78]        :                                       
[  79]        :                                       	bsrportc equ 0c4h
[  80]        :                                       bsrcreg equ 0c6h
[  81]        :                                       
[  82]        :                                       ; suppose set LIFTDIR bit (PC1 of bsr)
[  83]        :                                       ; mov al, 03h  ; 0000 001 1
[  84]        :                                       ; out bsrcreg, al
[  85]        :                                       
[  86]        :                                       ; suppose set DOORCLOSE bit (PC2 of bsr)
[  87]        :                                       ; mov al, 05h ; 0000 010 1
[  88]        :                                       ; out bsrcreg, al
[  89]        :                                       
[  90]        :                                       ; variables used
[  91]    040D: 00                                    liftMove db 0
[  92]    040E: 00                                    dest db 0
[  93]    040F: 00                                    secdest db 0
[  94]    0410: 00                                    dir db 0
[  95]    0411: 00                                    drState db 0
[  96]    0412: 00                                    current db 0
[  97]        :                                       
[  98]        :                                       ; initializing timers
[  99]        :                                       ; first timer (chip 1) mode 3; write 16 bit value 61a8h; converts 2.5MHz into 100Hz
[ 100]    0413: B0 36                                 mov al, 00110110b
[ 101]    0415: E6 86                                 out convcreg, al
[ 102]    0417: B0 A8                                 mov al, 0a8h
[ 103]    0419: E6 80                                 out conv25, al
[ 104]    041B: B0 61                                 mov al, 61h
[ 105]    041D: E6 80                                 out conv25, al
[ 106]        :                                       
[ 107]        :                                       ; second timer (chip 1) mode 3; write 8 bit value 0ah; converts 100Hz to 10Hz
[ 108]    041F: B0 56                                 mov al, 01010110b
[ 109]    0421: E6 86                                 out convcreg, al
[ 110]    0423: B0 0A                                 mov al, 0ah
[ 111]    0425: E6 82                                 out conv10, al
[ 112]        :                                       
[ 113]        :                                       ; third timer (chip 1) mode 1; used for PWM
[ 114]    0427: B0 92                                 mov al, 10010010b
[ 115]    0429: E6 86                                 out convcreg, al
[ 116]    042B: B0 0A                                 mov al, 0ah ; put a value of 10 so that motor is not running at the start
[ 117]    042D: E6 84                                 out pwm, al
[ 118]        :                                       
[ 119]        :                                       ; first timer (chip 2) mode 1; write 8 bits value 01h
[ 120]    042F: B0 08                                 mov al, 00001000b
[ 121]    0431: E6 96                                 out oscreg, al
[ 122]    0433: B0 01                                 mov al, 01h
[ 123]    0435: E6 90                                 out ostimer0, al
[ 124]        :                                       
[ 125]        :                                       ; second timer (chip 2) mode 1; write 8 bits value 20
[ 126]    0437: B0 08                                 mov al, 00001000b
[ 127]    0439: E6 96                                 out oscreg, al
[ 128]    043B: B0 14                                 mov al, 20
[ 129]    043D: E6 92                                 out ostimer1, al
[ 130]        :                                       
[ 131]        :                                       ; initializing 8255
[ 132]        :                                       ; port A output from 8255; for showing current floor value in LED
[ 133]        :                                       ; port B output from 8255; for showing destination floor value in LED
[ 134]        :                                       ; port C upper output; for keyboard columns
[ 135]        :                                       ; port C lower input; for keyboard rows
[ 136]    043F: B0 81                                 mov al, 10000001b
[ 137]    0441: E6 B6                                 out portcreg, al
[ 138]    0443: B0 00                                 mov al, 00h
[ 139]    0445: E6 B2                                 out portb, al ; display zero on the LED, at the start
[ 140]    0447: E6 B0                                 out porta, al ; display zero on the LED, at the start
[ 141]        :                                       
[ 142]        :                                       ; initialising 8255
[ 143]        :                                       ; port C output from 8255; for giving input signals to motor, lift door and one shot timer
[ 144]    0449: B0 92                                 mov al, 10010010b
[ 145]    044B: E6 C6                                 out bsrcreg, al
[ 146]        :                                       
[ 147]        :                                       ; initializing 8259
[ 148]        :                                       ; IR0 = for generating 100 ms one shot timer
[ 149]        :                                       ; IR1 = for keyboard interrupt
[ 150]        :                                       ; IR2 = for Coarse Sensor 1 (CS1)
[ 151]        :                                       ; IR3 = for Coarse Sensor 2 (CS2)
[ 152]        :                                       ; IR4 = for Fine Sensor (FS)
[ 153]    044D: B0 13                                 mov al, 00010011b ; icw 1
[ 154]    044F: E6 A0                                 out intloc1, al
[ 155]    0451: B0 08                                 mov al, 00001000b ; icw 2
[ 156]    0453: E6 A2                                 out intloc2, al
[ 157]    0455: B0 01                                 mov al, 00000001b ; icw 4
[ 158]    0457: E6 A2                                 out intloc2,al
[ 159]    0459: B0 FC                                 mov al, 11111100b ; ocw 1
[ 160]    045B: E6 A2                                 out intloc2, al
[ 161]        :                                       
[ 162]    045D: EB FE                                 infiloop: jmp infiloop
[ 163]        :                                       
[ 164]        :                                       ;-------------------------------------------------------------------------------------------
[ 165]        :                                       
[ 166]        :                                       ;all isrs used in the program
[ 167]        :                                       
[ 168]        :                                       ; ISR for one shot timer
[ 169]    045F:                                       os_isr:
[ 170]    045F: B0 60                                 mov al, 01100000b ; ocw 2 specific EOI for IR0
[ 171]    0461: E6 A0                                 out intloc1, al
[ 172]    0463: B1 01                                 mov CL, 01h
[ 173]    0465: CF                                    iret
[ 174]        :                                       
[ 175]        :                                       ; ISR for keyboard
[ 176]    0466:                                       key_isr:
[ 177]    0466: B0 61                                 mov al, 01100001b ; ocw 2 specific EOI for IR1
[ 178]    0468: E6 A0                                 out intloc1, al
[ 179]        :                                       
[ 180]        :                                       ; check for key press
[ 181]    046A: B0 00                                 mov al, 00h
[ 182]    046C: E6 B4                                 out portc, al
[ 183]    046E: E4 B4                                 x1: in al, portc
[ 184]    0470: 24 F0                                 and al, 0f0h
[ 185]    0472: 3C F0                                 cmp al, 0f0h
[ 186]    0474: 74 F8                                 jz x1
[ 187]        :                                       
[ 188]        :                                       ; check for key press in column 1
[ 189]    0476: B0 0E                                 mov al, 0eh
[ 190]    0478: 8A D8                                 mov bl, al
[ 191]    047A: E6 B4                                 out portc, al
[ 192]    047C: E4 B4                                 in al, portc
[ 193]    047E: 24 F0                                 and al, 0f0h
[ 194]    0480: 3C F0                                 cmp al, 0f0h
[ 195]    0482: 75 2A                                 jnz check_key
[ 196]        :                                       
[ 197]        :                                       ; check for key press in column 2
[ 198]    0484: B0 0D                                 mov al, 0dh
[ 199]    0486: 8A D8                                 mov bl, al
[ 200]    0488: E6 B4                                 out portc, al
[ 201]    048A: E4 B4                                 in al, portc
[ 202]    048C: 24 F0                                 and al, 0f0h
[ 203]    048E: 3C F0                                 cmp al, 0f0h
[ 204]    0490: 75 1C                                 jnz check_key
[ 205]        :                                       
[ 206]        :                                       ; check for key press in column 3
[ 207]    0492: B0 0B                                 mov al, 0bh
[ 208]    0494: 8A D8                                 mov bl, al
[ 209]    0496: E6 B4                                 out portc, al
[ 210]    0498: E4 B4                                 in al, portc
[ 211]    049A: 24 F0                                 and al, 0f0h
[ 212]    049C: 3C F0                                 cmp al, 0f0h
[ 213]    049E: 75 0E                                 jnz check_key
[ 214]        :                                       
[ 215]        :                                       ; check for key press in column 4
[ 216]    04A0: B0 0B                                 mov al, 0bh
[ 217]    04A2: 8A D8                                 mov bl, al
[ 218]    04A4: E6 B4                                 out portc, al
[ 219]    04A6: E4 B4                                 in al, portc
[ 220]    04A8: 24 F0                                 and al, 0f0h
[ 221]    04AA: 3C F0                                 cmp al, 0f0h
[ 222]    04AC: 75 00                                 jnz check_key
[ 223]        :                                       
[ 224]        :                                       ; find out which key was pressed from hex keypad
[ 225]        :                                       ; key00 => EEh == CLOSE DOOR
[ 226]        :                                       ; key04 => DEh == UP0
[ 227]        :                                       ; key05 => DDh == DOWN1
[ 228]        :                                       ; key06 => DBh == UP1
[ 229]        :                                       ; key07 => D7h == DOWN2
[ 230]        :                                       ; key08 => BEh == UP2
[ 231]        :                                       ; key09 => BDh == DOWN3
[ 232]        :                                       ; key10 => BBh == LIFT0
[ 233]        :                                       ; key11 => B7h == LIFT1
[ 234]        :                                       ; key12 => 7Eh == LIFT2
[ 235]        :                                       ; key13 => 7Dh == LIFT3
[ 236]        :                                       
[ 237]    04AE:                                       check_key:
[ 238]    04AE: 0A C3                                 or al, bl ; which key is pressed
[ 239]    04B0: 3C EE                                 cmp al, 0eeh
[ 240]    04B2: 75 05                                 jnz x5
[ 241]    04B4: E8 F1 08                              call drClose
[ 242]    04B7: EB F5                                 jmp check_key
[ 243]        :                                       
[ 244]    04B9: 3C DE                                 x5: cmp al, 0deh
[ 245]    04BB: 75 05                                 jnz x6
[ 246]    04BD: E8 1E 01                              call up0
[ 247]    04C0: EB EC                                 jmp check_key
[ 248]        :                                       
[ 249]    04C2: 3C DD                                 x6: cmp al, 0ddh
[ 250]    04C4: 75 05                                 jnz x7
[ 251]    04C6: E8 6C 01                              call down1
[ 252]    04C9: EB E3                                 jmp check_key
[ 253]        :                                       
[ 254]    04CB: 3C DB                                 x7: cmp al, 0dbh
[ 255]    04CD: 75 05                                 jnz x8
[ 256]    04CF: E8 6A 03                              call up1
[ 257]    04D2: EB DA                                 jmp check_key
[ 258]        :                                       
[ 259]    04D4: 3C D7                                 x8: cmp al, 0d7h
[ 260]    04D6: 75 05                                 jnz x9
[ 261]    04D8: E8 63 04                              call down2
[ 262]    04DB: EB D1                                 jmp check_key
[ 263]        :                                       
[ 264]    04DD: 3C BE                                 x9:cmp al, 0beh
[ 265]    04DF: 75 05                                 jnz x10
[ 266]    04E1: E8 73 02                              call up2
[ 267]    04E4: EB C8                                 jmp check_key
[ 268]        :                                       
[ 269]    04E6: 3C BD                                 x10:cmp al, 0bdh
[ 270]    04E8: 75 05                                 jnz x11
[ 271]    04EA: E8 FA 03                              call down3
[ 272]    04ED: EB BF                                 jmp check_key
[ 273]        :                                       
[ 274]    04EF: 3C BB                                 x11:cmp al, 0bbh
[ 275]    04F1: 75 05                                 jnz x12
[ 276]    04F3: E8 05 05                              call lift0
[ 277]    04F6: EB B6                                 jmp check_key
[ 278]        :                                       
[ 279]    04F8: 3C B7                                 x12:cmp al, 0b7h
[ 280]    04FA: 75 05                                 jnz x13
[ 281]    04FC: E8 D0 05                              call lift1
[ 282]    04FF: EB AD                                 jmp check_key
[ 283]        :                                       
[ 284]    0501: 3C 7E                                 x13:cmp al, 07eh
[ 285]    0503: 75 05                                 jnz x14
[ 286]    0505: E8 C9 06                              call lift2
[ 287]    0508: EB A4                                 jmp check_key
[ 288]        :                                       
[ 289]    050A: 3C 7D                                 x14:cmp al, 07dh
[ 290]    050C: 75 A0                                 jnz check_key
[ 291]    050E: E8 C3 07                              call lift3
[ 292]    0511: EB 9B                                 jmp check_key
[ 293]        :                                       
[ 294]        :                                       
[ 295]        :                                       ; ISR for coarse sensor 2
[ 296]    0513:                                       cs2_isr:
[ 297]    0513: 50                                    push ax
[ 298]    0514: 53                                    push bx
[ 299]    0515: B0 63                                 mov al, 01100011b ; ocw 2 specific EOI for IR3
[ 300]    0517: E6 A0                                 out intloc1, al
[ 301]    0519: A0 10 04                              mov al, dir
[ 302]    051C: 8A 26 12 04                           mov ah, current
[ 303]    0520: 8A 1E 0E 04                           mov bl, dest
[ 304]    0524: 3C 00                                 cmp al, 00h
[ 305]    0526: 75 06                                 jnz dir_down
[ 306]    0528: E8 D8 08                              call accel50
[ 307]    052B: 5B                                    pop bx
[ 308]    052C: 58                                    pop ax
[ 309]    052D: CF                                    iret
[ 310]        :                                       
[ 311]    052E:                                       dir_down:
[ 312]    052E: FE CC                                 dec ah
[ 313]    0530: 3A E3                                 cmp ah, bl
[ 314]    0532: 75 FA                                 jnz dir_down
[ 315]    0534: E8 D3 08                              call decel20
[ 316]    0537: 5B                                    pop bx
[ 317]    0538: 58                                    pop ax
[ 318]    0539: CF                                    iret
[ 319]        :                                       
[ 320]        :                                       ; SR for coarse sensor 1
[ 321]    053A:                                       cs1_isr:
[ 322]    053A: 50                                    push ax
[ 323]    053B: 53                                    push bx
[ 324]    053C: B0 62                                 mov al, 01100010b ; ocw 2 specific EOI for IR2
[ 325]    053E: E6 A0                                 out intloc1, al
[ 326]    0540: A0 10 04                              mov al, dir
[ 327]    0543: 8A 26 12 04                           mov ah, current
[ 328]    0547: 8A 1E 0E 04                           mov bl, dest
[ 329]    054B: 80 3E 10 04 01                        cmp dir, 01
[ 330]    0550: 75 06                                 jnz dir_up
[ 331]    0552: E8 AE 08                              call accel50
[ 332]    0555: 5B                                    pop bx
[ 333]    0556: 58                                    pop ax
[ 334]    0557: CF                                    iret
[ 335]        :                                       
[ 336]    0558:                                       dir_up:
[ 337]    0558: FE C4                                 inc ah
[ 338]    055A: 3A E3                                 cmp ah, bl
[ 339]    055C: 75 FA                                 jnz dir_up
[ 340]    055E: E8 A9 08                              call decel20
[ 341]    0561: 5B                                    pop bx
[ 342]    0562: 58                                    pop ax
[ 343]    0563: CF                                    iret
[ 344]        :                                       
[ 345]        :                                       ; SR for fine sensor
[ 346]    0564:                                       fs_isr:
[ 347]    0564: 50                                    push ax
[ 348]    0565: 53                                    push bx
[ 349]    0566: B0 64                                 mov al, 01100100b ; ocw 2 specific EOI for IR4
[ 350]    0568: E6 A0                                 out intloc1, al
[ 351]    056A: A0 0D 04                              mov al, liftMove
[ 352]    056D: 8A 26 12 04                           mov ah, current
[ 353]    0571: 8A 1E 0E 04                           mov bl, dest
[ 354]    0575: 8A 3E 10 04                           mov bh, dir
[ 355]    0579: 3C 01                                 cmp al, 01h
[ 356]    057B: 75 47                                 jnz f2
[ 357]    057D: 80 FF 00                              cmp bh, 00h
[ 358]    0580: 75 21                                 jnz f4
[ 359]    0582: FE CC                                 dec ah
[ 360]    0584: 88 26 12 04                           mov current, ah
[ 361]    0588: 3A E3                                 cmp ah, bl
[ 362]    058A: 75 3B                                 jnz f1
[ 363]    058C: E8 7B 08                              call decel20
[ 364]    058F: E8 22 08                              call ledDisp
[ 365]    0592: C6 06 11 04 00                        mov drState, 00h
[ 366]    0597: B0 04                                 mov AL, 04h
[ 367]    0599: E6 C6                                 out bsrcreg, AL
[ 368]    059B: C6 06 0D 04 00                        mov liftMove, 00h
[ 369]        :                                       
[ 370]        :                                       
[ 371]    05A0: 5B                                    pop bx
[ 372]    05A1: 58                                    pop ax
[ 373]    05A2: CF                                    iret
[ 374]        :                                       
[ 375]    05A3:                                       f4:
[ 376]    05A3: FE C4                                 inc ah
[ 377]    05A5: 88 26 12 04                           mov current, ah
[ 378]        :                                       
[ 379]    05A9: 3A E3                                 cmp ah, bl
[ 380]    05AB: 75 1A                                 jnz f1
[ 381]    05AD: E8 5A 08                              call decel20
[ 382]    05B0: E8 01 08                              call ledDisp
[ 383]    05B3: C6 06 11 04 00                        mov drState, 00h
[ 384]    05B8: B0 04                                 mov AL, 04h
[ 385]    05BA: E6 C6                                 out bsrcreg, AL
[ 386]    05BC: C6 06 0D 04 00                        mov liftMove, 00h
[ 387]    05C1: 5B                                    pop bx
[ 388]    05C2: 58                                    pop ax
[ 389]    05C3: CF                                    iret
[ 390]        :                                       
[ 391]    05C4:                                       f2:
[ 392]    05C4: 5B                                    pop bx
[ 393]    05C5: 58                                    pop ax
[ 394]    05C6: CF                                    iret
[ 395]        :                                       
[ 396]    05C7:                                       f1:
[ 397]    05C7: 80 FF 00                              cmp bh, 00h
[ 398]    05CA: 75 09                                 jnz f3
[ 399]    05CC: FE CC                                 dec ah
[ 400]    05CE: 88 26 12 04                           mov current, ah
[ 401]    05D2: 5B                                    pop bx
[ 402]    05D3: 58                                    pop ax
[ 403]    05D4: CF                                    iret
[ 404]        :                                       
[ 405]    05D5:                                       f3:
[ 406]    05D5: FE C4                                 inc ah
[ 407]    05D7: 88 26 12 04                           mov current, ah
[ 408]    05DB: 5B                                    pop bx
[ 409]    05DC: 58                                    pop ax
[ 410]    05DD: CF                                    iret
[ 411]        :                                       
[ 412]        :                                       
[ 413]        :                                       ; -------------------------------------------------------------------------------------
[ 414]        :                                       
[ 415]        :                                       ; all subroutines used in ISR
[ 416]    05DE:                                       up0 proc near
[ 417]    05DE: 50                                    push ax
[ 418]    05DF: 53                                    push bx
[ 419]    05E0: 51                                    push cx
[ 420]        :                                       
[ 421]    05E1: A0 12 04                              mov al, current
[ 422]    05E4: 8A 26 0D 04                           mov ah, liftMove
[ 423]    05E8: 8A 1E 11 04                           mov bl, drState
[ 424]        :                                       
[ 425]    05EC: 3C 00                                 cmp al,00
[ 426]    05EE: 75 12                                 jnz y2
[ 427]        :                                       
[ 428]    05F0: 80 FC 00                              cmp ah,00
[ 429]    05F3: 75 0D                                 jnz y2
[ 430]        :                                       
[ 431]        :                                       
[ 432]    05F5:                                       y1:
[ 433]    05F5: C6 06 11 04 00                        mov drState, 00h
[ 434]    05FA: B0 04                                 mov AL, 04h
[ 435]    05FC: E6 C6                                 out bsrcreg, AL
[ 436]        :                                       
[ 437]    05FE: 59                                    pop cx
[ 438]    05FF: 5B                                    pop bx
[ 439]    0600: 58                                    pop ax
[ 440]    0601: C3                                    ret
[ 441]        :                                       
[ 442]        :                                       
[ 443]    0602:                                       y2:
[ 444]    0602: 80 FC 00                              cmp ah, 00
[ 445]    0605: 75 FB                                 jnz y2
[ 446]        :                                       
[ 447]    0607: 3C 00                                 cmp al, 00
[ 448]    0609: 74 EA                                 jz y1
[ 449]        :                                       
[ 450]    060B: C6 06 0E 04 00                        mov dest, 00
[ 451]    0610: C6 06 10 04 00                        mov dir, 00
[ 452]    0615: B0 02                                 mov AL, 02h
[ 453]    0617: E6 C6                                 out bsrcreg,al
[ 454]    0619: C6 06 11 04 01                        mov drState, 01h
[ 455]    061E: B0 05                                 mov AL, 05h
[ 456]    0620: E6 C6                                 out bsrcreg, AL
[ 457]        :                                       
[ 458]    0622: B1 00                                 mov cl, 0
[ 459]    0624: 80 F9 01                              q1: cmp cl, 1
[ 460]    0627: 75 FB                                 jne q1
[ 461]        :                                       
[ 462]    0629: C6 06 0D 04 01                        mov liftMove, 01
[ 463]    062E: E8 A3 07                              call liftstar
[ 464]        :                                       
[ 465]    0631: 59                                    pop cx
[ 466]    0632: 5B                                    pop bx
[ 467]    0633: 58                                    pop ax
[ 468]    0634: C3                                    ret
[ 469]        :                                       up0 endp
[ 470]        :                                       
[ 471]        :                                       
[ 472]    0635:                                       down1 proc near
[ 473]    0635: 50                                    push ax
[ 474]    0636: 53                                    push bx
[ 475]    0637: 51                                    push cx
[ 476]        :                                       
[ 477]    0638: A0 12 04                              mov al, current
[ 478]    063B: 8A 26 0D 04                           mov ah, liftMove
[ 479]    063F: 8A 1E 11 04                           mov bl, drState
[ 480]    0643: 8A 3E 10 04                           mov bh, dir
[ 481]        :                                       
[ 482]    0647: 3C 01                                 cmp al, 01
[ 483]    0649: 74 03 E9 83 00                        jnz y3
[ 484]        :                                       
[ 485]    064E: 80 FC 01                              cmp ah, 01
[ 486]    0651: 75 71                                 jnz y4
[ 487]        :                                       
[ 488]        :                                       
[ 489]    0653: 80 FC 01                              y5: cmp ah, 01
[ 490]    0656: 74 FB                                 jz y5
[ 491]        :                                       
[ 492]        :                                       
[ 493]    0658:                                       y11:
[ 494]    0658: C6 06 0E 04 01                        mov dest, 01
[ 495]    065D: C6 06 10 04 00                        mov dir, 00
[ 496]    0662: B0 02                                 mov al, 02h
[ 497]    0664: E6 C6                                 out bsrcreg, al
[ 498]        :                                       
[ 499]    0666: C6 06 11 04 01                        mov drState, 01h
[ 500]    066B: B0 05                                 mov AL, 05h
[ 501]    066D: E6 C6                                 out bsrcreg, AL
[ 502]        :                                       
[ 503]    066F: B1 00                                 mov cl, 0
[ 504]    0671: 80 F9 01                              q8: cmp cl, 1
[ 505]    0674: 75 FB                                 jne q8
[ 506]        :                                       
[ 507]    0676: C6 06 0D 04 01                        mov liftMove, 01
[ 508]    067B: E8 56 07                              call liftstar
[ 509]        :                                       
[ 510]    067E: 80 FC 00                              cmp ah, 00
[ 511]    0681: 75 1C                                 jnz y12
[ 512]        :                                       
[ 513]    0683: C6 06 10 04 01                        mov dir, 01
[ 514]    0688: B0 03                                 mov al,03H
[ 515]    068A: E6 C6                                 out bsrcreg,al
[ 516]        :                                       
[ 517]    068C: B1 00                                 mov cl, 0
[ 518]    068E: 80 F9 01                              q2: cmp cl, 1
[ 519]    0691: 75 FB                                 jne q2
[ 520]        :                                       
[ 521]    0693: C6 06 0D 04 01                        mov liftMove, 1
[ 522]    0698: E8 39 07                              call liftstar
[ 523]        :                                       
[ 524]    069B: 59                                    pop cx
[ 525]    069C: 5B                                    pop bx
[ 526]    069D: 58                                    pop ax
[ 527]    069E: C3                                    ret
[ 528]        :                                       
[ 529]        :                                       
[ 530]    069F:                                       y12:
[ 531]    069F: C6 06 11 04 00                        mov drState, 00h
[ 532]    06A4: B0 04                                 mov AL, 04h
[ 533]    06A6: E6 C6                                 out bsrcreg, AL
[ 534]        :                                       
[ 535]    06A8: C6 06 10 04 00                        mov dir, 00
[ 536]    06AD: B0 02                                 mov AL, 02h
[ 537]    06AF: E6 C6                                 out bsrcreg,al
[ 538]        :                                       
[ 539]    06B1: B1 00                                 mov cl, 0
[ 540]    06B3: 80 F9 01                              q3: cmp cl, 1
[ 541]    06B6: 75 FB                                 jne q3
[ 542]        :                                       
[ 543]    06B8: C6 06 0D 04 01                        mov liftMove, 01
[ 544]    06BD: E8 14 07                              call liftstar
[ 545]        :                                       
[ 546]    06C0: 59                                    pop cx
[ 547]    06C1: 5B                                    pop bx
[ 548]    06C2: 58                                    pop ax
[ 549]    06C3: C3                                    ret
[ 550]        :                                       
[ 551]        :                                       
[ 552]    06C4:                                       y4:
[ 553]    06C4: C6 06 11 04 00                        mov drState, 00h
[ 554]    06C9: B0 04                                 mov AL, 04h
[ 555]    06CB: E6 C6                                 out bsrcreg, AL
[ 556]        :                                       
[ 557]    06CD: 59                                    pop cx
[ 558]    06CE: 5B                                    pop bx
[ 559]    06CF: 58                                    pop ax
[ 560]    06D0: C3                                    ret
[ 561]        :                                       
[ 562]    06D1:                                       y3:
[ 563]    06D1: 80 FC 01                              cmp ah, 01
[ 564]    06D4: 75 55                                 jnz y6
[ 565]        :                                       
[ 566]    06D6: 80 FF 00                              cmp bh, 0
[ 567]    06D9: 75 49                                 jnz y7
[ 568]        :                                       
[ 569]    06DB: 3C 02                                 cmp al, 2
[ 570]    06DD: 75 0D                                 jnz y8
[ 571]        :                                       
[ 572]        :                                       
[ 573]    06DF:                                       y9:
[ 574]    06DF: 8A 0E 0E 04                           mov cl, dest
[ 575]    06E3: 88 0E 0F 04                           mov secdest, cl
[ 576]    06E7: C6 06 0E 04 01                        mov dest,1
[ 577]        :                                       
[ 578]        :                                       
[ 579]    06EC:                                       y8:
[ 580]    06EC: 8A 0E 0E 04                           mov cl, dest
[ 581]    06F0: 80 F9 02                              cmp cl, 02
[ 582]    06F3: 75 EA                                 jnz y9
[ 583]        :                                       
[ 584]        :                                       
[ 585]    06F5:                                       y10:
[ 586]    06F5: 80 FC 00                              cmp ah, 00
[ 587]    06F8: 75 FB                                 jnz y10
[ 588]        :                                       
[ 589]    06FA: C6 06 0E 04 01                        mov dest, 01
[ 590]    06FF: C6 06 11 04 01                        mov drState, 01h
[ 591]    0704: B0 05                                 mov AL, 05h
[ 592]    0706: E6 C6                                 out bsrcreg, AL
[ 593]        :                                       
[ 594]    0708: C6 06 10 04 00                        mov dir, 00
[ 595]    070D: B0 02                                 mov AL, 02h
[ 596]    070F: E6 C6                                 out bsrcreg,al
[ 597]        :                                       
[ 598]    0711: B1 00                                 mov cl, 0
[ 599]    0713: 80 F9 01                              q4: cmp cl, 1
[ 600]    0716: 75 FB                                 jne q4
[ 601]        :                                       
[ 602]    0718: C6 06 0D 04 01                        mov liftMove, 01
[ 603]    071D: E8 B4 06                              call liftstar
[ 604]        :                                       
[ 605]    0720: 59                                    pop cx
[ 606]    0721: 5B                                    pop bx
[ 607]    0722: 58                                    pop ax
[ 608]    0723: C3                                    ret
[ 609]        :                                       
[ 610]        :                                       
[ 611]    0724:                                       y7:
[ 612]    0724: 80 FC 00                              cmp ah, 00
[ 613]    0727: 75 FB                                 jnz y7
[ 614]    0729: EB 00                                 jmp y6
[ 615]        :                                       
[ 616]        :                                       
[ 617]    072B:                                       y6:
[ 618]    072B: 3C 01                                 cmp al, 01
[ 619]    072D: 74 03 E9 26 FF                        jnz y11
[ 620]        :                                       
[ 621]    0732: C6 06 10 04 00                        mov dir, 00
[ 622]    0737: B0 02                                 mov al, 02h
[ 623]    0739: E6 C6                                 out bsrcreg, al
[ 624]        :                                       
[ 625]    073B: C6 06 11 04 00                        mov drState, 00h
[ 626]    0740: B0 04                                 mov AL, 04h
[ 627]    0742: E6 C6                                 out bsrcreg, AL
[ 628]        :                                       
[ 629]    0744: B1 00                                 mov cl, 0
[ 630]    0746: 80 F9 01                              q9: cmp cl, 1
[ 631]    0749: 75 FB                                 jne q9
[ 632]        :                                       
[ 633]    074B: C6 06 0D 04 01                        mov liftMove, 01
[ 634]    0750: E8 81 06                              call liftstar
[ 635]        :                                       
[ 636]    0753: 59                                    pop cx
[ 637]    0754: 5B                                    pop bx
[ 638]    0755: 58                                    pop ax
[ 639]    0756: C3                                    ret
[ 640]        :                                       down1 endp
[ 641]        :                                       
[ 642]        :                                       
[ 643]    0757:                                       up2 proc near
[ 644]    0757: 50                                    push ax
[ 645]    0758: 53                                    push bx
[ 646]    0759: 51                                    push cx
[ 647]        :                                       
[ 648]    075A: A0 12 04                              mov al, current
[ 649]    075D: 8A 26 0D 04                           mov ah, liftMove
[ 650]    0761: 8A 1E 11 04                           mov bl, drState
[ 651]    0765: 8A 3E 10 04                           mov bh, dir
[ 652]        :                                       
[ 653]    0769: 3C 02                                 cmp al, 02
[ 654]    076B: 75 61                                 jnz up2y3
[ 655]        :                                       
[ 656]    076D: 80 FC 01                              cmp ah, 01
[ 657]    0770: 75 4F                                 jnz up2y4
[ 658]        :                                       
[ 659]        :                                       
[ 660]    0772: 80 FC 01                              up2y5: cmp ah, 01
[ 661]    0775: 74 FB                                 jz up2y5
[ 662]        :                                       
[ 663]        :                                       
[ 664]    0777:                                       up2y11:
[ 665]    0777: C6 06 0E 04 02                        mov dest, 02
[ 666]    077C: C6 06 11 04 01                        mov drState, 01h
[ 667]    0781: B0 05                                 mov AL, 05h
[ 668]    0783: E6 C6                                 out bsrcreg, AL
[ 669]        :                                       
[ 670]    0785: 3C 03                                 cmp al, 03
[ 671]    0787: 75 1C                                 jnz up2y12
[ 672]        :                                       
[ 673]    0789: C6 06 10 04 00                        mov dir, 00
[ 674]    078E: B0 02                                 mov AL, 02h
[ 675]    0790: E6 C6                                 out bsrcreg,al
[ 676]        :                                       
[ 677]    0792: B1 00                                 mov cl, 0
[ 678]    0794: 80 F9 01                              q5: cmp cl, 1
[ 679]    0797: 75 FB                                 jne q5
[ 680]        :                                       
[ 681]    0799: C6 06 0D 04 01                        mov liftMove, 01
[ 682]    079E: E8 33 06                              call liftstar
[ 683]        :                                       
[ 684]    07A1: 59                                    pop cx
[ 685]    07A2: 5B                                    pop bx
[ 686]    07A3: 58                                    pop ax
[ 687]    07A4: C3                                    ret
[ 688]        :                                       
[ 689]        :                                       
[ 690]    07A5:                                       up2y12:
[ 691]    07A5: C6 06 10 04 01                        mov dir, 01
[ 692]    07AA: B0 03                                 mov al,03H
[ 693]    07AC: E6 C6                                 out bsrcreg,al
[ 694]        :                                       
[ 695]    07AE: B1 00                                 mov cl, 0
[ 696]    07B0: 80 F9 01                              q6: cmp cl, 1
[ 697]    07B3: 75 FB                                 jne q6
[ 698]        :                                       
[ 699]    07B5: C6 06 0D 04 01                        mov liftMove, 01
[ 700]    07BA: E8 17 06                              call liftstar
[ 701]        :                                       
[ 702]    07BD: 59                                    pop cx
[ 703]    07BE: 5B                                    pop bx
[ 704]    07BF: 58                                    pop ax
[ 705]    07C0: C3                                    ret
[ 706]        :                                       
[ 707]        :                                       
[ 708]    07C1:                                       up2y4:
[ 709]    07C1: C6 06 11 04 00                        mov drState, 00h
[ 710]    07C6: B0 04                                 mov AL, 04h
[ 711]    07C8: E6 C6                                 out bsrcreg, AL
[ 712]        :                                       
[ 713]    07CA: 59                                    pop cx
[ 714]    07CB: 5B                                    pop bx
[ 715]    07CC: 58                                    pop ax
[ 716]    07CD: C3                                    ret
[ 717]        :                                       
[ 718]        :                                       
[ 719]    07CE:                                       up2y3:
[ 720]    07CE: 80 FC 01                              cmp ah, 01
[ 721]    07D1: 75 55                                 jnz up2y6
[ 722]        :                                       
[ 723]    07D3: 80 FF 01                              cmp bh, 1
[ 724]    07D6: 75 49                                 jnz up2y7
[ 725]        :                                       
[ 726]    07D8: 3C 01                                 cmp al, 1
[ 727]    07DA: 75 0D                                 jnz up2y8
[ 728]        :                                       
[ 729]        :                                       
[ 730]    07DC:                                       up2y9:
[ 731]    07DC: 8A 0E 0E 04                           mov cl, dest
[ 732]    07E0: 88 0E 0F 04                           mov secdest, cl
[ 733]    07E4: C6 06 0E 04 02                        mov dest, 2
[ 734]        :                                       
[ 735]        :                                       
[ 736]    07E9:                                       up2y8:
[ 737]    07E9: 8A 0E 0E 04                           mov cl, dest
[ 738]    07ED: 80 F9 01                              cmp cl, 01
[ 739]    07F0: 75 EA                                 jnz up2y9
[ 740]        :                                       
[ 741]        :                                       
[ 742]    07F2:                                       up2y10:
[ 743]    07F2: 80 FC 01                              cmp ah, 01
[ 744]    07F5: 74 FB                                 jz up2y10
[ 745]        :                                       
[ 746]    07F7: C6 06 0E 04 02                        mov dest, 02
[ 747]    07FC: C6 06 11 04 01                        mov drState, 01h
[ 748]    0801: B0 05                                 mov AL, 05h
[ 749]    0803: E6 C6                                 out bsrcreg, AL
[ 750]        :                                       
[ 751]    0805: C6 06 10 04 01                        mov dir, 01
[ 752]    080A: B0 03                                 mov al,03H
[ 753]    080C: E6 C6                                 out bsrcreg,al
[ 754]        :                                       
[ 755]    080E: B1 00                                 mov cl, 0
[ 756]    0810: 80 F9 01                              q7: cmp cl, 1
[ 757]    0813: 75 FB                                 jne q7
[ 758]        :                                       
[ 759]    0815: C6 06 0D 04 01                        mov liftMove, 01
[ 760]    081A: E8 B7 05                              call liftstar
[ 761]        :                                       
[ 762]    081D: 59                                    pop cx
[ 763]    081E: 5B                                    pop bx
[ 764]    081F: 58                                    pop ax
[ 765]    0820: C3                                    ret
[ 766]        :                                       
[ 767]        :                                       
[ 768]    0821:                                       up2y7:
[ 769]    0821: 80 FC 01                              cmp ah, 01
[ 770]    0824: 74 FB                                 jz up2y7
[ 771]        :                                       
[ 772]    0826: EB 00                                 jmp up2y6
[ 773]        :                                       
[ 774]        :                                       
[ 775]    0828:                                       up2y6:
[ 776]    0828: 3C 02                                 cmp al, 02
[ 777]    082A: 74 03 E9 48 FF                        jnz up2y11
[ 778]        :                                       
[ 779]    082F: C6 06 11 04 00                        mov drState, 00h
[ 780]    0834: B0 04                                 mov AL, 04h
[ 781]    0836: E6 C6                                 out bsrcreg, AL
[ 782]        :                                       
[ 783]    0838: 59                                    pop cx
[ 784]    0839: 5B                                    pop bx
[ 785]    083A: 58                                    pop ax
[ 786]    083B: C3                                    ret
[ 787]        :                                       up2 endp
[ 788]        :                                       
[ 789]        :                                       
[ 790]    083C:                                       up1 proc near
[ 791]    083C: 50                                    push ax
[ 792]    083D: 53                                    push bx
[ 793]    083E: 51                                    push cx
[ 794]        :                                       
[ 795]    083F: A0 12 04                              mov al, current
[ 796]    0842: 8A 26 0D 04                           mov ah, liftMove
[ 797]    0846: 8A 1E 11 04                           mov bl, drState
[ 798]    084A: 8A 3E 10 04                           mov bh, dir
[ 799]        :                                       
[ 800]    084E: 3C 01                                 cmp al, 01
[ 801]    0850: 75 62                                 jnz up1y3
[ 802]        :                                       
[ 803]    0852: 80 FC 01                              cmp ah, 01
[ 804]    0855: 75 50                                 jnz up1y4
[ 805]        :                                       
[ 806]        :                                       
[ 807]    0857: 80 FC 01                              up1y5: cmp ah, 01
[ 808]    085A: 74 FB                                 jz up1y5
[ 809]        :                                       
[ 810]        :                                       
[ 811]    085C:                                       up1y11:
[ 812]    085C: C6 06 0E 04 01                        mov dest, 01
[ 813]    0861: C6 06 11 04 01                        mov drState, 01h
[ 814]    0866: B0 05                                 mov AL, 05h
[ 815]    0868: E6 C6                                 out bsrcreg, AL
[ 816]        :                                       
[ 817]    086A: 80 FC 00                              cmp ah, 00
[ 818]    086D: 75 1C                                 jnz up1y12
[ 819]        :                                       
[ 820]    086F: C6 06 10 04 01                        mov dir, 01
[ 821]    0874: B0 03                                 mov al,03H
[ 822]    0876: E6 C6                                 out bsrcreg,al
[ 823]        :                                       
[ 824]    0878: B1 00                                 mov cl, 0
[ 825]    087A: 80 F9 01                              q10:cmp cl, 1
[ 826]    087D: 75 FB                                 jne q10
[ 827]        :                                       
[ 828]    087F: C6 06 0D 04 01                        mov liftMove, 01
[ 829]    0884: E8 4D 05                              call liftstar
[ 830]        :                                       
[ 831]    0887: 59                                    pop cx
[ 832]    0888: 5B                                    pop bx
[ 833]    0889: 58                                    pop ax
[ 834]    088A: C3                                    ret
[ 835]        :                                       
[ 836]        :                                       
[ 837]    088B:                                       up1y12:
[ 838]    088B: C6 06 10 04 00                        mov dir, 00
[ 839]    0890: B0 02                                 mov AL, 02h
[ 840]    0892: E6 C6                                 out bsrcreg,al
[ 841]        :                                       
[ 842]    0894: B1 00                                 mov cl, 0
[ 843]    0896: 80 F9 01                              q11:cmp cl, 1
[ 844]    0899: 75 FB                                 jne q11
[ 845]        :                                       
[ 846]    089B: C6 06 0D 04 01                        mov liftMove, 01
[ 847]    08A0: E8 31 05                              call liftstar
[ 848]        :                                       
[ 849]    08A3: 59                                    pop cx
[ 850]    08A4: 5B                                    pop bx
[ 851]    08A5: 58                                    pop ax
[ 852]    08A6: C3                                    ret
[ 853]        :                                       
[ 854]        :                                       
[ 855]    08A7:                                       up1y4:
[ 856]    08A7: C6 06 11 04 00                        mov drState, 00h
[ 857]    08AC: B0 04                                 mov AL, 04h
[ 858]    08AE: E6 C6                                 out bsrcreg, AL
[ 859]        :                                       
[ 860]    08B0: 59                                    pop cx
[ 861]    08B1: 5B                                    pop bx
[ 862]    08B2: 58                                    pop ax
[ 863]    08B3: C3                                    ret
[ 864]        :                                       
[ 865]        :                                       
[ 866]    08B4:                                       up1y3:
[ 867]    08B4: 80 FC 01                              cmp ah, 01
[ 868]    08B7: 75 1D                                 jnz up1y6
[ 869]        :                                       
[ 870]    08B9: 80 FF 01                              cmp bh, 1
[ 871]    08BC: 75 11                                 jnz up1y7
[ 872]        :                                       
[ 873]        :                                       
[ 874]    08BE:                                       up1y9:
[ 875]    08BE: 8A 0E 0E 04                           mov cl, dest
[ 876]    08C2: 88 0E 0F 04                           mov secdest, cl
[ 877]    08C6: C6 06 0E 04 01                        mov dest, 1
[ 878]        :                                       
[ 879]    08CB: 59                                    pop cx
[ 880]    08CC: 5B                                    pop bx
[ 881]    08CD: 58                                    pop ax
[ 882]    08CE: C3                                    ret
[ 883]        :                                       
[ 884]        :                                       
[ 885]    08CF:                                       up1y7:
[ 886]    08CF: 80 FC 00                              cmp ah, 00
[ 887]    08D2: 75 FB                                 jnz up1y7
[ 888]    08D4: EB 00                                 jmp up1y6
[ 889]        :                                       
[ 890]        :                                       
[ 891]    08D6:                                       up1y6:
[ 892]    08D6: 3C 01                                 cmp al, 01
[ 893]    08D8: 75 82                                 jnz up1y11
[ 894]        :                                       
[ 895]    08DA: C6 06 11 04 00                        mov drState, 00h
[ 896]    08DF: B0 04                                 mov AL, 04h
[ 897]    08E1: E6 C6                                 out bsrcreg, AL
[ 898]        :                                       
[ 899]    08E3: 59                                    pop cx
[ 900]    08E4: 5B                                    pop bx
[ 901]    08E5: 58                                    pop ax
[ 902]    08E6: C3                                    ret
[ 903]        :                                       up1 endp
[ 904]        :                                       
[ 905]        :                                       
[ 906]    08E7:                                       down3 proc near
[ 907]    08E7: 50                                    push ax
[ 908]    08E8: 53                                    push bx
[ 909]    08E9: 51                                    push cx
[ 910]        :                                       
[ 911]    08EA: A0 12 04                              mov al, current
[ 912]    08ED: 8A 26 0D 04                           mov ah, liftMove
[ 913]    08F1: 8A 1E 11 04                           mov bl, drState
[ 914]        :                                       
[ 915]    08F5: 3C 03                                 cmp al, 03
[ 916]    08F7: 75 12                                 jnz dn3y2
[ 917]        :                                       
[ 918]    08F9: 80 FC 00                              cmp ah, 00
[ 919]    08FC: 75 0D                                 jnz dn3y2
[ 920]        :                                       
[ 921]        :                                       
[ 922]    08FE:                                       dn3y1:
[ 923]    08FE: C6 06 11 04 00                        mov drState, 00h
[ 924]    0903: B0 04                                 mov AL, 04h
[ 925]    0905: E6 C6                                 out bsrcreg, AL
[ 926]        :                                       
[ 927]    0907: 59                                    pop cx
[ 928]    0908: 5B                                    pop bx
[ 929]    0909: 58                                    pop ax
[ 930]    090A: C3                                    ret
[ 931]        :                                       
[ 932]        :                                       
[ 933]    090B:                                       dn3y2:
[ 934]    090B: 80 FC 00                              cmp ah, 00
[ 935]    090E: 75 FB                                 jnz dn3y2
[ 936]        :                                       
[ 937]    0910: 3C 03                                 cmp al, 03
[ 938]    0912: 74 EA                                 jz dn3y1
[ 939]        :                                       
[ 940]    0914: C6 06 0E 04 00                        mov dest, 00
[ 941]    0919: C6 06 10 04 00                        mov dir, 00
[ 942]    091E: B0 02                                 mov AL, 02h
[ 943]    0920: E6 C6                                 out bsrcreg,al
[ 944]        :                                       
[ 945]    0922: C6 06 11 04 01                        mov drState, 01h
[ 946]    0927: B0 05                                 mov AL, 05h
[ 947]    0929: E6 C6                                 out bsrcreg, AL
[ 948]        :                                       
[ 949]    092B: B1 00                                 mov cl, 0
[ 950]    092D: 80 F9 01                              q12:cmp cl, 1
[ 951]    0930: 75 FB                                 jne q12
[ 952]        :                                       
[ 953]    0932: C6 06 0D 04 01                        mov liftMove, 01
[ 954]    0937: E8 9A 04                              call liftstar
[ 955]        :                                       
[ 956]    093A: 59                                    pop cx
[ 957]    093B: 5B                                    pop bx
[ 958]    093C: 58                                    pop ax
[ 959]    093D: C3                                    ret
[ 960]        :                                       down3 endp
[ 961]        :                                       
[ 962]    093E:                                       down2 proc near
[ 963]    093E: 50                                    push ax
[ 964]    093F: 53                                    push bx
[ 965]    0940: 51                                    push cx
[ 966]        :                                       
[ 967]    0941: A0 12 04                              mov al, current
[ 968]    0944: 8A 26 0D 04                           mov ah, liftMove
[ 969]    0948: 8A 1E 11 04                           mov bl, drState
[ 970]    094C: 8A 3E 10 04                           mov bh, dir
[ 971]        :                                       
[ 972]    0950: 3C 02                                 cmp al, 02
[ 973]    0952: 75 71                                 jnz dn2y3
[ 974]        :                                       
[ 975]    0954: 80 FC 01                              cmp ah, 01
[ 976]    0957: 75 5F                                 jnz dn2y4
[ 977]        :                                       
[ 978]        :                                       
[ 979]    0959: 80 FC 01                              dn2y5: cmp ah, 01
[ 980]    095C: 74 FB                                 jz dn2y5
[ 981]        :                                       
[ 982]        :                                       
[ 983]    095E:                                       dn2y11:
[ 984]    095E: C6 06 0E 04 01                        mov dest, 01
[ 985]    0963: C6 06 11 04 01                        mov drState, 01h
[ 986]    0968: B0 05                                 mov AL, 05h
[ 987]    096A: E6 C6                                 out bsrcreg, AL
[ 988]        :                                       
[ 989]    096C: B1 00                                 mov cl, 0
[ 990]    096E: 80 F9 01                              q13:cmp cl, 1
[ 991]    0971: 75 FB                                 jne q13
[ 992]        :                                       
[ 993]    0973: C6 06 0D 04 01                        mov liftMove, 01
[ 994]    0978: E8 59 04                              call liftstar
[ 995]        :                                       
[ 996]    097B: 80 FC 03                              cmp ah, 03
[ 997]    097E: 75 1C                                 jnz dn2y12
[ 998]        :                                       
[ 999]    0980: C6 06 10 04 00                        mov dir, 00
[1000]    0985: B0 02                                 mov AL, 02h
[1001]    0987: E6 C6                                 out bsrcreg,al
[1002]        :                                       
[1003]    0989: B1 00                                 mov cl, 0
[1004]    098B: 80 F9 01                              q14:cmp cl, 1
[1005]    098E: 75 FB                                 jne q14
[1006]        :                                       
[1007]    0990: C6 06 0D 04 01                        mov liftMove, 01
[1008]    0995: E8 3C 04                              call liftstar
[1009]        :                                       
[1010]    0998: 59                                    pop cx
[1011]    0999: 5B                                    pop bx
[1012]    099A: 58                                    pop ax
[1013]    099B: C3                                    ret
[1014]        :                                       
[1015]        :                                       
[1016]    099C:                                       dn2y12:
[1017]    099C: C6 06 10 04 01                        mov dir, 01
[1018]    09A1: B0 03                                 mov al,03H
[1019]    09A3: E6 C6                                 out bsrcreg,al
[1020]        :                                       
[1021]    09A5: B1 00                                 mov cl, 0
[1022]    09A7: 80 F9 01                              q15:cmp cl, 1
[1023]    09AA: 75 FB                                 jne q15
[1024]        :                                       
[1025]    09AC: C6 06 0D 04 01                        mov liftMove, 01
[1026]    09B1: E8 20 04                              call liftstar
[1027]        :                                       
[1028]    09B4: 59                                    pop cx
[1029]    09B5: 5B                                    pop bx
[1030]    09B6: 58                                    pop ax
[1031]    09B7: C3                                    ret
[1032]        :                                       
[1033]        :                                       
[1034]    09B8:                                       dn2y4:
[1035]    09B8: C6 06 11 04 00                        mov drState, 00h
[1036]    09BD: B0 04                                 mov AL, 04h
[1037]    09BF: E6 C6                                 out bsrcreg, AL
[1038]        :                                       
[1039]    09C1: 59                                    pop cx
[1040]    09C2: 5B                                    pop bx
[1041]    09C3: 58                                    pop ax
[1042]    09C4: C3                                    ret
[1043]        :                                       
[1044]        :                                       
[1045]    09C5:                                       dn2y3:
[1046]    09C5: 80 FC 01                              cmp ah, 01
[1047]    09C8: 75 1D                                 jnz dn2y6
[1048]    09CA: 80 FF 01                              cmp bh, 1
[1049]    09CD: 75 11                                 jnz dn2y7
[1050]        :                                       
[1051]        :                                       
[1052]    09CF:                                       dn2y9:
[1053]    09CF: 8A 0E 0E 04                           mov cl, dest
[1054]    09D3: 88 0E 0F 04                           mov secdest, cl
[1055]    09D7: C6 06 0E 04 01                        mov dest, 1
[1056]        :                                       
[1057]    09DC: 59                                    pop cx
[1058]    09DD: 5B                                    pop bx
[1059]    09DE: 58                                    pop ax
[1060]    09DF: C3                                    ret
[1061]        :                                       
[1062]        :                                       
[1063]    09E0:                                       dn2y7:
[1064]    09E0: 80 FC 00                              cmp ah, 00
[1065]    09E3: 75 FB                                 jnz dn2y7
[1066]    09E5: EB 00                                 jmp dn2y6
[1067]        :                                       
[1068]        :                                       
[1069]    09E7:                                       dn2y6:
[1070]    09E7: 3C 02                                 cmp al, 02
[1071]    09E9: 74 03 E9 70 FF                        jnz dn2y11
[1072]        :                                       
[1073]    09EE: C6 06 11 04 00                        mov drState, 00h
[1074]    09F3: B0 04                                 mov AL, 04h
[1075]    09F5: E6 C6                                 out bsrcreg, AL
[1076]        :                                       
[1077]    09F7: 59                                    pop cx
[1078]    09F8: 5B                                    pop bx
[1079]    09F9: 58                                    pop ax
[1080]    09FA: C3                                    ret
[1081]        :                                       down2 endp
[1082]        :                                       
[1083]        :                                       
[1084]        :                                       ; subroutine when lift0 is pressed
[1085]    09FB:                                       lift0 proc near
[1086]    09FB: 50                                    push ax
[1087]    09FC: 51                                    push cx
[1088]        :                                       
[1089]    09FD: 80 3E 12 04 00                        cmp current, 0
[1090]    0A02: 74 2D                                 jz a1
[1091]        :                                       
[1092]    0A04: C6 06 0E 04 00                        mov dest, 0
[1093]    0A09: C6 06 10 04 00                        mov dir, 0
[1094]    0A0E: B0 02                                 mov al, 02h
[1095]    0A10: E6 C6                                 out bsrcreg, al
[1096]        :                                       
[1097]    0A12: C6 06 11 04 01                        mov drState, 01h
[1098]    0A17: B0 05                                 mov AL, 05h
[1099]    0A19: E6 C6                                 out bsrcreg, AL
[1100]        :                                       
[1101]    0A1B: B1 00                                 mov cl, 0
[1102]    0A1D: 80 F9 01                              q16:cmp cl, 1
[1103]    0A20: 75 FB                                 jne q16
[1104]        :                                       
[1105]    0A22: C6 06 0D 04 01                        mov liftMove, 1
[1106]    0A27: E8 AA 03                              call liftstar
[1107]        :                                       
[1108]        :                                       
[1109]        :                                       ; check if lift is moving or not
[1110]    0A2A: 80 3E 0D 04 01                        a2: cmp liftMove, 1
[1111]    0A2F: 74 F9                                 jz a2
[1112]        :                                       
[1113]        :                                       
[1114]        :                                       ; secdest = 0 OR secdest = dest
[1115]    0A31: B4 00                                 a1: mov ah, 0
[1116]    0A33: A0 0F 04                              mov al, secDest
[1117]    0A36: 80 3E 0F 04 00                        cmp secDest, 0
[1118]    0A3B: 74 69                                 jz a3
[1119]        :                                       
[1120]    0A3D: FE C4                                 inc ah
[1121]    0A3F: 3A 06 0E 04                           cmp al, dest
[1122]    0A43: 74 61                                 jz a3
[1123]        :                                       
[1124]    0A45: FE C4                                 inc ah
[1125]    0A47: 80 FC 00                              cmp ah, 0
[1126]    0A4A: 7D 00                                 jge a4
[1127]        :                                       
[1128]        :                                       
[1129]        :                                       ; secdest > dest
[1130]    0A4C: A0 0F 04                              a4: mov al, secDest
[1131]    0A4F: 3A 06 0E 04                           cmp al, dest
[1132]    0A53: 7F 26                                 jg a5
[1133]        :                                       
[1134]    0A55: A2 0E 04                              mov dest, al
[1135]    0A58: C6 06 10 04 00                        mov dir, 0
[1136]    0A5D: B0 02                                 mov al, 02h
[1137]    0A5F: E6 C6                                 out bsrcreg, al
[1138]        :                                       
[1139]    0A61: C6 06 11 04 01                        mov drState, 01h
[1140]    0A66: B0 05                                 mov AL, 05h
[1141]    0A68: E6 C6                                 out bsrcreg, AL
[1142]        :                                       
[1143]    0A6A: B1 00                                 mov cl, 0
[1144]    0A6C: 80 F9 01                              q17:cmp cl, 1
[1145]    0A6F: 75 FB                                 jne q17
[1146]        :                                       
[1147]    0A71: C6 06 0D 04 01                        mov liftMove, 1
[1148]    0A76: E8 5B 03                              call liftstar
[1149]    0A79: EB 24                                 jmp a6
[1150]        :                                       
[1151]        :                                       
[1152]    0A7B: A2 0E 04                              a5: mov dest, al
[1153]    0A7E: C6 06 10 04 01                        mov dir, 01h
[1154]    0A83: B0 03                                 mov AL, 03h
[1155]    0A85: E6 C6                                 out bsrcreg, AL
[1156]        :                                       
[1157]    0A87: C6 06 11 04 01                        mov drState, 01h
[1158]    0A8C: B0 05                                 mov AL, 05h
[1159]    0A8E: E6 C6                                 out bsrcreg, AL
[1160]        :                                       
[1161]    0A90: B1 00                                 mov cl, 0
[1162]    0A92: 80 F9 01                              q18:cmp cl, 1
[1163]    0A95: 75 FB                                 jne q18
[1164]        :                                       
[1165]    0A97: C6 06 0D 04 01                        mov liftMove, 1
[1166]    0A9C: E8 35 03                              call liftstar
[1167]        :                                       
[1168]        :                                       
[1169]    0A9F: 80 3E 0D 04 01                        a6: cmp liftMove, 1
[1170]    0AA4: 74 F9                                 jz a6
[1171]        :                                       
[1172]        :                                       
[1173]    0AA6: C6 06 0E 04 00                        a3: mov dest, 0
[1174]    0AAB: C6 06 10 04 00                        mov dir, 0
[1175]    0AB0: B0 02                                 mov al, 02h
[1176]    0AB2: E6 C6                                 out bsrcreg, al
[1177]        :                                       
[1178]    0AB4: C6 06 11 04 01                        mov drState, 01h
[1179]    0AB9: B0 05                                 mov AL, 05h
[1180]    0ABB: E6 C6                                 out bsrcreg, AL
[1181]        :                                       
[1182]    0ABD: B1 00                                 mov cl, 0
[1183]    0ABF: 80 F9 01                              q19:cmp cl, 1
[1184]    0AC2: 75 FB                                 jne q19
[1185]        :                                       
[1186]    0AC4: C6 06 0D 04 01                        mov liftMove, 01
[1187]    0AC9: E8 08 03                              call liftstar
[1188]        :                                       
[1189]    0ACC: 59                                    pop cx
[1190]    0ACD: 58                                    pop ax
[1191]    0ACE: C3                                    ret
[1192]        :                                       lift0 endp
[1193]        :                                       
[1194]        :                                       
[1195]        :                                       ; subroutine when lift1 is pressed
[1196]    0ACF:                                       lift1 proc near
[1197]    0ACF: 50                                    push ax
[1198]    0AD0: 80 3E 12 04 01                        cmp current, 1
[1199]    0AD5: 74 5C                                 jz b1
[1200]        :                                       
[1201]        :                                       ; check if current floor = 0
[1202]    0AD7: 80 3E 12 04 00                        cmp current, 0
[1203]    0ADC: 74 28                                 jz b2
[1204]        :                                       
[1205]    0ADE: C6 06 0E 04 01                        mov dest, 1
[1206]    0AE3: C6 06 10 04 00                        mov dir, 0
[1207]    0AE8: B0 02                                 mov al, 02h
[1208]    0AEA: E6 C6                                 out bsrcreg, al
[1209]        :                                       
[1210]    0AEC: C6 06 11 04 01                        mov drState, 01h
[1211]    0AF1: B0 05                                 mov AL, 05h
[1212]    0AF3: E6 C6                                 out bsrcreg, AL
[1213]        :                                       
[1214]    0AF5: B1 00                                 mov cl, 0
[1215]    0AF7: 80 F9 01                              q20:cmp cl, 1
[1216]    0AFA: 75 FB                                 jne q20
[1217]        :                                       
[1218]    0AFC: C6 06 0D 04 01                        mov liftMove, 01
[1219]    0B01: E8 D0 02                              call liftstar
[1220]        :                                       
[1221]    0B04: EB 26                                 jmp b3
[1222]        :                                       
[1223]        :                                       
[1224]    0B06: C6 06 0E 04 01                        b2: mov dest, 1
[1225]    0B0B: C6 06 10 04 01                        mov dir, 01h
[1226]    0B10: B0 03                                 mov AL, 03h
[1227]    0B12: E6 C6                                 out bsrcreg, AL
[1228]        :                                       
[1229]    0B14: C6 06 11 04 01                        mov drState, 01h
[1230]    0B19: B0 05                                 mov AL, 05h
[1231]    0B1B: E6 C6                                 out bsrcreg, AL
[1232]        :                                       
[1233]    0B1D: B1 00                                 mov cl, 0
[1234]    0B1F: 80 F9 01                              q21:cmp cl, 1
[1235]    0B22: 75 FB                                 jne q21
[1236]        :                                       
[1237]    0B24: C6 06 0D 04 01                        mov liftMove, 01
[1238]    0B29: E8 A8 02                              call liftstar
[1239]        :                                       
[1240]        :                                       
[1241]        :                                       ; check if lift is moving or not
[1242]    0B2C: 80 3E 0D 04 01                        b3: cmp liftMove, 1
[1243]    0B31: 74 F9                                 jz b3
[1244]        :                                       
[1245]        :                                       
[1246]        :                                       ; secdest = 0 OR secdest = dest
[1247]    0B33: B4 00                                 b1: mov ah, 0
[1248]    0B35: A0 0F 04                              mov al, secDest
[1249]    0B38: 80 3E 0F 04 00                        cmp secDest, 0
[1250]    0B3D: 74 69                                 jz b4
[1251]        :                                       
[1252]    0B3F: FE C4                                 inc ah
[1253]    0B41: 3A 06 0E 04                           cmp al, dest
[1254]    0B45: 74 61                                 jz b4
[1255]        :                                       
[1256]    0B47: FE C4                                 inc ah
[1257]    0B49: 80 FC 00                              cmp ah, 0
[1258]    0B4C: 7D 00                                 jge b5
[1259]        :                                       
[1260]        :                                       
[1261]        :                                       ; secdest > dest
[1262]    0B4E: A0 0F 04                              b5: mov al, secDest
[1263]    0B51: 3A 06 0E 04                           cmp al, dest
[1264]    0B55: 7F 26                                 jg b6
[1265]        :                                       
[1266]    0B57: A2 0E 04                              mov dest, al
[1267]    0B5A: C6 06 10 04 00                        mov dir, 0
[1268]    0B5F: B0 02                                 mov al, 02h
[1269]    0B61: E6 C6                                 out bsrcreg, al
[1270]        :                                       
[1271]    0B63: C6 06 11 04 01                        mov drState, 01h
[1272]    0B68: B0 05                                 mov AL, 05h
[1273]    0B6A: E6 C6                                 out bsrcreg, AL
[1274]        :                                       
[1275]    0B6C: B1 00                                 mov cl, 0
[1276]    0B6E: 80 F9 01                              q22:cmp cl, 1
[1277]    0B71: 75 FB                                 jne q22
[1278]        :                                       
[1279]    0B73: C6 06 0D 04 01                        mov liftMove, 01
[1280]    0B78: E8 59 02                              call liftstar
[1281]        :                                       
[1282]    0B7B: EB 24                                 jmp b7
[1283]        :                                       
[1284]        :                                       
[1285]    0B7D: A2 0E 04                              b6: mov dest, al
[1286]    0B80: C6 06 10 04 01                        mov dir, 01h
[1287]    0B85: B0 03                                 mov AL, 03h
[1288]    0B87: E6 C6                                 out bsrcreg, AL
[1289]        :                                       
[1290]    0B89: C6 06 11 04 01                        mov drState, 01h
[1291]    0B8E: B0 05                                 mov AL, 05h
[1292]    0B90: E6 C6                                 out bsrcreg, AL
[1293]        :                                       
[1294]    0B92: B1 00                                 mov cl, 0
[1295]    0B94: 80 F9 01                              q23:cmp cl, 1
[1296]    0B97: 75 FB                                 jne q23
[1297]        :                                       
[1298]    0B99: C6 06 0D 04 01                        mov liftMove, 01
[1299]    0B9E: E8 33 02                              call liftstar
[1300]        :                                       
[1301]        :                                       
[1302]    0BA1: 80 3E 0D 04 01                        b7: cmp liftMove, 1
[1303]    0BA6: 74 F9                                 jz b7
[1304]        :                                       
[1305]        :                                       
[1306]    0BA8: C6 06 0E 04 00                        b4: mov dest, 0
[1307]    0BAD: C6 06 10 04 00                        mov dir, 0
[1308]    0BB2: B0 02                                 mov al, 02h
[1309]    0BB4: E6 C6                                 out bsrcreg, al
[1310]        :                                       
[1311]    0BB6: C6 06 11 04 01                        mov drState, 01h
[1312]    0BBB: B0 05                                 mov AL, 05h
[1313]    0BBD: E6 C6                                 out bsrcreg, AL
[1314]        :                                       
[1315]    0BBF: B1 00                                 mov cl, 0
[1316]    0BC1: 80 F9 01                              q24:cmp cl, 1
[1317]    0BC4: 75 FB                                 jne q24
[1318]        :                                       
[1319]    0BC6: C6 06 0D 04 01                        mov liftMove, 01
[1320]    0BCB: E8 06 02                              call liftstar
[1321]        :                                       
[1322]    0BCE: 59                                    pop cx
[1323]    0BCF: 58                                    pop ax
[1324]    0BD0: C3                                    ret
[1325]        :                                       lift1 endp
[1326]        :                                       
[1327]        :                                       
[1328]        :                                       ; subroutine when lift2 is pressed
[1329]    0BD1:                                       lift2 proc near
[1330]    0BD1: 50                                    push ax
[1331]    0BD2: 51                                    push cx
[1332]        :                                       
[1333]    0BD3: 80 3E 12 04 02                        cmp current, 2
[1334]    0BD8: 74 5C                                 jz c1
[1335]        :                                       
[1336]        :                                       ; check if current floor = 3
[1337]    0BDA: 80 3E 12 04 03                        cmp current, 3
[1338]    0BDF: 74 28                                 jz c2
[1339]        :                                       
[1340]    0BE1: C6 06 0E 04 02                        mov dest, 2
[1341]    0BE6: C6 06 10 04 01                        mov dir, 01h
[1342]    0BEB: B0 03                                 mov AL, 03h
[1343]    0BED: E6 C6                                 out bsrcreg, AL
[1344]        :                                       
[1345]    0BEF: C6 06 11 04 01                        mov drState, 01h
[1346]    0BF4: B0 05                                 mov AL, 05h
[1347]    0BF6: E6 C6                                 out bsrcreg, AL
[1348]        :                                       
[1349]    0BF8: B1 00                                 mov cl, 0
[1350]    0BFA: 80 F9 01                              q25:cmp cl, 1
[1351]    0BFD: 75 FB                                 jne q25
[1352]        :                                       
[1353]    0BFF: C6 06 0D 04 01                        mov liftMove, 01
[1354]    0C04: E8 CD 01                              call liftstar
[1355]        :                                       
[1356]    0C07: EB 26                                 jmp c3
[1357]        :                                       
[1358]        :                                       
[1359]    0C09: C6 06 0E 04 02                        c2: mov dest, 2
[1360]    0C0E: C6 06 10 04 00                        mov dir, 0
[1361]    0C13: B0 02                                 mov al, 02h
[1362]    0C15: E6 C6                                 out bsrcreg, al
[1363]        :                                       
[1364]    0C17: C6 06 11 04 01                        mov drState, 01h
[1365]    0C1C: B0 05                                 mov AL, 05h
[1366]    0C1E: E6 C6                                 out bsrcreg, AL
[1367]        :                                       
[1368]    0C20: B1 00                                 mov cl, 0
[1369]    0C22: 80 F9 01                              q26:cmp cl, 1
[1370]    0C25: 75 FB                                 jne q26
[1371]        :                                       
[1372]    0C27: C6 06 0D 04 01                        mov liftMove, 01
[1373]    0C2C: E8 A5 01                              call liftstar
[1374]        :                                       
[1375]        :                                       
[1376]        :                                       ; check if lift is moving or not
[1377]    0C2F: 80 3E 0D 04 01                        c3: cmp liftMove, 1
[1378]    0C34: 74 F9                                 jz c3
[1379]        :                                       
[1380]        :                                       
[1381]        :                                       ; secdest = 0 OR secdest = dest
[1382]    0C36: B4 00                                 c1: mov ah, 0
[1383]    0C38: A0 0F 04                              mov al, secDest
[1384]    0C3B: 80 3E 0F 04 00                        cmp secDest, 0
[1385]    0C40: 74 69                                 jz c4
[1386]        :                                       
[1387]    0C42: FE C4                                 inc ah
[1388]    0C44: 3A 06 0E 04                           cmp al, dest
[1389]    0C48: 74 61                                 jz c4
[1390]        :                                       
[1391]    0C4A: FE C4                                 inc ah
[1392]    0C4C: 80 FC 00                              cmp ah, 0
[1393]    0C4F: 7D 00                                 jge c5
[1394]        :                                       
[1395]        :                                       
[1396]        :                                       ; secdest > dest
[1397]    0C51: A0 0F 04                              c5: mov al, secDest
[1398]    0C54: 3A 06 0E 04                           cmp al, dest
[1399]    0C58: 7F 26                                 jg c6
[1400]        :                                       
[1401]    0C5A: A2 0E 04                              mov dest, al
[1402]    0C5D: C6 06 10 04 00                        mov dir, 0
[1403]    0C62: B0 02                                 mov al, 02h
[1404]    0C64: E6 C6                                 out bsrcreg, al
[1405]        :                                       
[1406]    0C66: C6 06 11 04 01                        mov drState, 01h
[1407]    0C6B: B0 05                                 mov AL, 05h
[1408]    0C6D: E6 C6                                 out bsrcreg, AL
[1409]        :                                       
[1410]    0C6F: B1 00                                 mov cl, 0
[1411]    0C71: 80 F9 01                              q27:cmp cl, 1
[1412]    0C74: 75 FB                                 jne q27
[1413]        :                                       
[1414]    0C76: C6 06 0D 04 01                        mov liftMove, 01
[1415]    0C7B: E8 56 01                              call liftstar
[1416]        :                                       
[1417]    0C7E: EB 24                                 jmp c7
[1418]        :                                       
[1419]        :                                       
[1420]    0C80: A2 0E 04                              c6: mov dest, al
[1421]    0C83: C6 06 10 04 01                        mov dir, 01h
[1422]    0C88: B0 03                                 mov AL, 03h
[1423]    0C8A: E6 C6                                 out bsrcreg, AL
[1424]        :                                       
[1425]    0C8C: C6 06 11 04 01                        mov drState, 01h
[1426]    0C91: B0 05                                 mov AL, 05h
[1427]    0C93: E6 C6                                 out bsrcreg, AL
[1428]        :                                       
[1429]    0C95: B1 00                                 mov cl, 0
[1430]    0C97: 80 F9 01                              q28:cmp cl, 1
[1431]    0C9A: 75 FB                                 jne q28
[1432]        :                                       
[1433]    0C9C: C6 06 0D 04 01                        mov liftMove, 01
[1434]    0CA1: E8 30 01                              call liftstar
[1435]        :                                       
[1436]        :                                       
[1437]    0CA4: 80 3E 0D 04 01                        c7: cmp liftMove, 1
[1438]    0CA9: 74 F9                                 jz c7
[1439]        :                                       
[1440]        :                                       
[1441]    0CAB: C6 06 0E 04 00                        c4: mov dest, 0
[1442]    0CB0: C6 06 10 04 00                        mov dir, 0
[1443]    0CB5: B0 02                                 mov al, 02h
[1444]    0CB7: E6 C6                                 out bsrcreg, al
[1445]        :                                       
[1446]    0CB9: C6 06 11 04 01                        mov drState, 01h
[1447]    0CBE: B0 05                                 mov AL, 05h
[1448]    0CC0: E6 C6                                 out bsrcreg, AL
[1449]        :                                       
[1450]    0CC2: B1 00                                 mov cl, 0
[1451]    0CC4: 80 F9 01                              q29:cmp cl, 1
[1452]    0CC7: 75 FB                                 jne q29
[1453]        :                                       
[1454]    0CC9: C6 06 0D 04 01                        mov liftMove, 01
[1455]    0CCE: E8 03 01                              call liftstar
[1456]        :                                       
[1457]    0CD1: 59                                    pop cx
[1458]    0CD2: 58                                    pop ax
[1459]    0CD3: C3                                    ret
[1460]        :                                       lift2 endp
[1461]        :                                       
[1462]        :                                       
[1463]        :                                       ; subroutine when lift3 is pressed
[1464]    0CD4:                                       lift3 proc near
[1465]    0CD4: 50                                    push ax
[1466]    0CD5: 51                                    push cx
[1467]        :                                       
[1468]    0CD6: 80 3E 12 04 03                        cmp current, 3
[1469]    0CDB: 74 2D                                 jz d1
[1470]        :                                       
[1471]    0CDD: C6 06 0E 04 03                        mov dest, 3
[1472]    0CE2: C6 06 10 04 01                        mov dir, 01h
[1473]    0CE7: B0 03                                 mov AL, 03h
[1474]    0CE9: E6 C6                                 out bsrcreg, AL
[1475]        :                                       
[1476]    0CEB: C6 06 11 04 01                        mov drState, 01h
[1477]    0CF0: B0 05                                 mov AL, 05h
[1478]    0CF2: E6 C6                                 out bsrcreg, AL
[1479]        :                                       
[1480]    0CF4: B1 00                                 mov cl, 0
[1481]    0CF6: 80 F9 01                              q30:cmp cl, 1
[1482]    0CF9: 75 FB                                 jne q30
[1483]        :                                       
[1484]    0CFB: C6 06 0D 04 01                        mov liftMove, 01
[1485]    0D00: E8 D1 00                              call liftstar
[1486]        :                                       
[1487]        :                                       
[1488]        :                                       ; check if lift is moving or not
[1489]    0D03: 80 3E 0D 04 01                        d2: cmp liftMove, 1
[1490]    0D08: 74 F9                                 jz d2
[1491]        :                                       
[1492]        :                                       
[1493]        :                                       ; secdest = 0 OR secdest = dest
[1494]    0D0A: B4 00                                 d1: mov ah, 0
[1495]    0D0C: A0 0F 04                              mov al, secDest
[1496]    0D0F: 80 3E 0F 04 00                        cmp secDest, 0
[1497]    0D14: 74 69                                 jz d3
[1498]        :                                       
[1499]    0D16: FE C4                                 inc ah
[1500]    0D18: 3A 06 0E 04                           cmp al, dest
[1501]    0D1C: 74 61                                 jz d3
[1502]        :                                       
[1503]    0D1E: FE C4                                 inc ah
[1504]    0D20: 80 FC 00                              cmp ah, 0
[1505]    0D23: 7D 00                                 jge d4
[1506]        :                                       
[1507]        :                                       
[1508]        :                                       ; secdest > dest
[1509]    0D25: A0 0F 04                              d4: mov al, secDest
[1510]    0D28: 3A 06 0E 04                           cmp al, dest
[1511]    0D2C: 7F 26                                 jg d5
[1512]        :                                       
[1513]    0D2E: A2 0E 04                              mov dest, al
[1514]    0D31: C6 06 10 04 00                        mov dir, 0
[1515]    0D36: B0 02                                 mov al, 02h
[1516]    0D38: E6 C6                                 out bsrcreg, al
[1517]        :                                       
[1518]    0D3A: C6 06 11 04 01                        mov drState, 01h
[1519]    0D3F: B0 05                                 mov AL, 05h
[1520]    0D41: E6 C6                                 out bsrcreg, AL
[1521]        :                                       
[1522]    0D43: B1 00                                 mov cl, 0
[1523]    0D45: 80 F9 01                              q31:cmp cl, 1
[1524]    0D48: 75 FB                                 jne q31
[1525]        :                                       
[1526]    0D4A: C6 06 0D 04 01                        mov liftMove, 01
[1527]    0D4F: E8 82 00                              call liftstar
[1528]        :                                       
[1529]    0D52: EB 24                                 jmp d6
[1530]        :                                       
[1531]        :                                       
[1532]    0D54: A2 0E 04                              d5: mov dest, al
[1533]    0D57: C6 06 10 04 01                        mov dir, 01h
[1534]    0D5C: B0 03                                 mov AL, 03h
[1535]    0D5E: E6 C6                                 out bsrcreg, AL
[1536]        :                                       
[1537]    0D60: C6 06 11 04 01                        mov drState, 01h
[1538]    0D65: B0 05                                 mov AL, 05h
[1539]    0D67: E6 C6                                 out bsrcreg, AL
[1540]        :                                       
[1541]    0D69: B1 00                                 mov cl, 0
[1542]    0D6B: 80 F9 01                              q32:cmp cl, 1
[1543]    0D6E: 75 FB                                 jne q32
[1544]        :                                       
[1545]    0D70: C6 06 0D 04 01                        mov liftMove, 01
[1546]    0D75: E8 5C 00                              call liftstar
[1547]        :                                       
[1548]        :                                       
[1549]    0D78: 80 3E 0D 04 01                        d6: cmp liftMove, 1
[1550]    0D7D: 74 F9                                 jz d6
[1551]        :                                       
[1552]        :                                       
[1553]    0D7F: C6 06 0E 04 00                        d3: mov dest, 0
[1554]    0D84: C6 06 10 04 00                        mov dir, 0
[1555]    0D89: B0 02                                 mov al, 02h
[1556]    0D8B: E6 C6                                 out bsrcreg, al
[1557]        :                                       
[1558]    0D8D: C6 06 11 04 01                        mov drState, 01h
[1559]    0D92: B0 05                                 mov AL, 05h
[1560]    0D94: E6 C6                                 out bsrcreg, AL
[1561]        :                                       
[1562]    0D96: B1 00                                 mov cl, 0
[1563]    0D98: 80 F9 01                              q33:cmp cl, 1
[1564]    0D9B: 75 FB                                 jne q33
[1565]        :                                       
[1566]    0D9D: C6 06 0D 04 01                        mov liftMove, 01
[1567]    0DA2: E8 2F 00                              call liftstar
[1568]        :                                       
[1569]    0DA5: 59                                    pop cx
[1570]    0DA6: 58                                    pop ax
[1571]    0DA7: C3                                    ret
[1572]        :                                       lift3 endp
[1573]        :                                       
[1574]        :                                       
[1575]        :                                       ; subroutine when drClose is called
[1576]    0DA8:                                       drClose proc near
[1577]    0DA8: 50                                    push ax
[1578]        :                                       
[1579]    0DA9: C6 06 11 04 01                        mov drState, 01h
[1580]    0DAE: B0 05                                 mov AL, 05h
[1581]    0DB0: E6 C6                                 out bsrcreg, AL
[1582]        :                                       
[1583]    0DB2: 58                                    pop ax
[1584]    0DB3: C3                                    ret
[1585]        :                                       drClose endp
[1586]        :                                       
[1587]        :                                       
[1588]        :                                       ; LED display logic
[1589]    0DB4:                                       ledDisp proc near
[1590]    0DB4: 50                                    push ax
[1591]        :                                       
[1592]    0DB5: A0 12 04                              mov al, current
[1593]    0DB8: E6 B0                                 out porta, al
[1594]        :                                       
[1595]    0DBA: 80 3E 0D 04 01                        cmp liftMove, 01
[1596]    0DBF: 75 02                                 jnz e1
[1597]        :                                       
[1598]    0DC1: E6 B2                                 out portb, al
[1599]        :                                       
[1600]        :                                       
[1601]    0DC3: 80 3E 10 04 00                        e1: cmp dir, 00
[1602]    0DC8: 75 04                                 jnz e2
[1603]        :                                       
[1604]    0DCA: FE C8                                 dec al
[1605]    0DCC: E6 B2                                 out portb, al
[1606]        :                                       
[1607]        :                                       
[1608]    0DCE: FE C0                                 e2: inc al
[1609]    0DD0: E6 B2                                 out portb, al
[1610]        :                                       
[1611]    0DD2: 58                                    pop ax
[1612]    0DD3: C3                                    ret
[1613]        :                                       ledDisp endp
[1614]        :                                       
[1615]        :                                       
[1616]        :                                       ; start and accelaration routine 0% to 40%
[1617]    0DD4:                                       liftstar proc near
[1618]    0DD4: 50                                    push ax
[1619]    0DD5: 51                                    push cx
[1620]        :                                       
[1621]    0DD6: B0 08                                 mov AL,08h ; for 20% duty cycle
[1622]    0DD8: E6 84                                 out pwm,AL
[1623]        :                                       
[1624]    0DDA: B0 00                                 mov AL,00h ; first give a low on port PC0 (bsr) (0000 000 0b)
[1625]    0DDC: E6 C6                                 out bsrcreg,AL
[1626]        :                                       
[1627]    0DDE: B0 01                                 mov AL,01h ; then give a high on port PC0 (bsr) to trigger one shot timer (0000 000 1b)
[1628]    0DE0: E6 C6                                 out bsrcreg,AL
[1629]        :                                       
[1630]    0DE2: B1 00                                 mov CL,00h
[1631]    0DE4: 80 F9 01                              il1:cmp CL,01h ; infinite loop, waiting for ISR to set CL to 1
[1632]    0DE7: 75 FB                                 jne il1
[1633]        :                                       
[1634]    0DE9: B0 07                                 mov AL,07h ; 30% duty cycle
[1635]    0DEB: E6 84                                 out pwm,AL
[1636]        :                                       
[1637]    0DED: B0 00                                 mov AL,00h
[1638]    0DEF: E6 C6                                 out bsrcreg,AL
[1639]        :                                       
[1640]    0DF1: B0 01                                 mov AL,01h
[1641]    0DF3: E6 C6                                 out bsrcreg,AL
[1642]        :                                       
[1643]    0DF5: B1 00                                 mov CL,00h
[1644]    0DF7: 80 F9 01                              il2:cmp CL,01h ; infinite loop, waiting for ISR to set CL to 1
[1645]    0DFA: 75 FB                                 jne il2
[1646]        :                                       
[1647]    0DFC: B0 06                                 mov AL,06h ; 40% duty cycle
[1648]    0DFE: E6 84                                 out pwm, AL
[1649]        :                                       
[1650]    0E00: 59                                    pop cx
[1651]    0E01: 58                                    pop ax
[1652]    0E02: C3                                    ret
[1653]        :                                       liftstar endp
[1654]        :                                       
[1655]        :                                       
[1656]        :                                       ; accelaration to 50%
[1657]    0E03:                                       accel50 proc near
[1658]    0E03: 50                                    push ax
[1659]        :                                       
[1660]    0E04: B0 05                                 mov AL,05h ; 50% duty cycle
[1661]    0E06: E6 84                                 out pwm, AL
[1662]        :                                       
[1663]    0E08: 58                                    pop ax
[1664]    0E09: C3                                    ret
[1665]        :                                       accel50 endp
[1666]        :                                       
[1667]        :                                       
[1668]        :                                       ; decelaration routine from 50% to 20%
[1669]    0E0A:                                       decel20 proc near
[1670]    0E0A: 50                                    push ax
[1671]    0E0B: 51                                    push cx
[1672]        :                                       
[1673]    0E0C: B0 06                                 mov AL,06h ; 40%
[1674]    0E0E: E6 84                                 out pwm,AL
[1675]        :                                       
[1676]    0E10: B0 00                                 mov AL,00h
[1677]    0E12: E6 C6                                 out bsrcreg,AL
[1678]        :                                       
[1679]    0E14: B0 01                                 mov AL,01h
[1680]    0E16: E6 C6                                 out bsrcreg,AL
[1681]        :                                       
[1682]    0E18: B1 00                                 mov CL,00h
[1683]    0E1A: 80 F9 01                              il3:cmp CL,01h
[1684]    0E1D: 75 FB                                 jne il3
[1685]        :                                       
[1686]    0E1F: B0 07                                 mov AL,07h ; 30%
[1687]    0E21: E6 84                                 out pwm,AL
[1688]        :                                       
[1689]    0E23: B0 00                                 mov AL,00h
[1690]    0E25: E6 C6                                 out bsrcreg,AL
[1691]        :                                       
[1692]    0E27: B0 01                                 mov AL,01h
[1693]    0E29: E6 C6                                 out bsrcreg,AL
[1694]        :                                       
[1695]    0E2B: B1 00                                 mov CL,00h
[1696]    0E2D: 80 F9 01                              il4:cmp CL,01h
[1697]    0E30: 75 FB                                 jne il4
[1698]        :                                       
[1699]    0E32: B0 08                                 mov AL,08h ; 20%
[1700]    0E34: E6 84                                 out pwm,AL
[1701]        :                                       
[1702]    0E36: 59                                    pop cx
[1703]    0E37: 58                                    pop ax
[1704]    0E38: C3                                    ret
[1705]        :                                       decel20 endp
[1706]        :                                       
[1707]        :                                       ; finally stop from 20% to 0
[1708]    0E39:                                       liftstop proc near
[1709]    0E39: 50                                    push ax
[1710]        :                                       
[1711]    0E3A: B0 0A                                 mov AL,0ah
[1712]    0E3C: E6 84                                 out pwm,AL
[1713]        :                                       
[1714]    0E3E: 58                                    pop ax
[1715]    0E3F: C3                                    ret
[1716]        :                                       liftstop endp
[1717]        :                                       
[1718]        :                                       
[1719]        :                                       
[1720]        :                                       		
[1721]        :                                       	
[1722]        :                                       
[1723]        :                                       
[1724]        :                                       		
[1725]        :                                       
[1726]        :                                       
[1727]        :                                       
[1728]        :                                       
[1729]        :                                       
[1730]        :                                       
[1731]        :                                       
[1732]        :                                       
[1733]        :                                       
[1734]        :                                       
[1735]        :                                       
[1736]        :                                       
[1737]        :                                       
[1738]        :                                       
 
===================================================================================================
 




===================================================================================================
