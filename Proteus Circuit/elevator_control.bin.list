EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
elevator_control.bin -- emu8086 assembler version: 4.08  
 
[ 18-04-2021  --  22:36:31 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       #make_bin#
[   2]        :                                       
[   3]        :                                       #LOAD_SEGMENT=FFFFh#
[   4]        :                                       #LOAD_OFFSET=0000h#
[   5]        :                                       
[   6]        :                                       #CS=0000h#
[   7]        :                                       #IP=0000h#
[   8]        :                                       
[   9]        :                                       #DS=0000h#
[  10]        :                                       #ES=0000h#
[  11]        :                                       
[  12]        :                                       #SS=0000h#
[  13]        :                                       #SP=FFFEh#
[  14]        :                                       
[  15]        :                                       #AX=0000h#
[  16]        :                                       #BX=0000h#
[  17]        :                                       #CX=0000h#
[  18]        :                                       #DX=0000h#
[  19]        :                                       #SI=0000h#
[  20]        :                                       #DI=0000h#
[  21]        :                                       #BP=0000h#
[  22]        :                                       
[  23]    0000: E9 FD 03                              jmp st1
[  24]    0003: 90                                    nop
[  25]    0004: 00 00 00 00 00 00 00 00 00 00 00 00   db 28 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  26]        :                                       
[  27]        :                                       ; int 08h for 1 shot timer
[  28]    0020: 6B 04                                 dw os_isr
[  29]    0022: 00 00                                 dw 0
[  30]        :                                       
[  31]        :                                       ; int 09h for keyboard
[  32]    0024: 72 04                                 dw key_isr
[  33]    0026: 00 00                                 dw 0
[  34]        :                                       
[  35]        :                                       ; int 10h for Coarse Sensor 2
[  36]    0028: 50 05                                 dw cs2_isr
[  37]    002A: 00 00                                 dw 0
[  38]        :                                       
[  39]        :                                       ; int 11h for Coarse Sensor 1
[  40]    002C: 77 05                                 dw cs1_isr
[  41]    002E: 00 00                                 dw 0
[  42]        :                                       
[  43]        :                                       ; int 12h for Fine Sensor
[  44]    0030: A1 05                                 dw fs_isr
[  45]    0032: 00 00                                 dw 0
[  46]        :                                       
[  47]        :                                       ; int 13h to int 255h not used
[  48]    0034: 00 00 00 00 00 00 00 00 00 00 00 00   db 972 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                                                    
[  49]        :                                       
[  50]    0400: FA                                    st1: cli
[  51]        :                                       ;rom1 : 00000 - 00fff
[  52]        :                                       ;ram1 : 01000 - 01fff
[  53]        :                                       ;rom2 : ff000 - fffff
[  54]        :                                       
[  55]        :                                       ; intialize ds, es, ss to start of RAM
[  56]    0401: B8 00 01                              mov ax,0100h
[  57]    0404: 8E D8                                 mov ds,ax
[  58]    0406: 8E C0                                 mov es,ax
[  59]    0408: 8E D0                                 mov ss,ax
[  60]    040A: BC FE 1F                              mov sp,01ffeH
[  61]        :                                       
[  62]        :                                       porta equ 0b0h
[  63]        :                                       portb equ 0b2h
[  64]        :                                       portc equ 0b4h
[  65]        :                                       portcreg equ 0b6h
[  66]        :                                       
[  67]        :                                       conv25 equ 80h
[  68]        :                                       conv10 equ 82h
[  69]        :                                       pwm equ 84h
[  70]        :                                       convcreg equ 86h
[  71]        :                                       
[  72]        :                                       ostimer0 equ 90h
[  73]        :                                       ostimer1 equ 92h
[  74]        :                                       oscreg equ 96h
[  75]        :                                       
[  76]        :                                       intloc1 equ 0A0h
[  77]        :                                       intloc2 equ 0A2h
[  78]        :                                       
[  79]        :                                       bsrcreg equ 0c6h
[  80]        :                                       
[  81]        :                                       ; suppose set LIFTDIR bit (PC1 of bsr)
[  82]        :                                       ; mov al, 03h  ; 0000 001 1
[  83]        :                                       ; out bsrcreg, al
[  84]        :                                       
[  85]        :                                       ; suppose set DOORCLOSE bit (PC2 of bsr)
[  86]        :                                       ; mov al, 05h ; 0000 010 1
[  87]        :                                       ; out bsrcreg, al
[  88]        :                                       
[  89]        :                                       ; variables used
[  90]    040D: 00                                    liftMove db 0
[  91]    040E: 00                                    dest db 0
[  92]    040F: 00                                    secdest db 0
[  93]    0410: 00                                    dir db 0
[  94]    0411: 00                                    drState db 0
[  95]    0412: 00                                    current db 0
[  96]        :                                       
[  97]        :                                       ; initializing timers
[  98]        :                                       ; first timer (chip 1) mode 3; write 16 bit value 61a8h; converts 2.5MHz into 100Hz
[  99]    0413: B0 36                                 mov al, 00110110b
[ 100]    0415: E6 86                                 out convcreg, al
[ 101]    0417: B0 A8                                 mov al, 0a8h
[ 102]    0419: E6 80                                 out conv25, al
[ 103]    041B: B0 61                                 mov al, 61h
[ 104]    041D: E6 80                                 out conv25, al
[ 105]        :                                       
[ 106]        :                                       ; second timer (chip 1) mode 3; write 8 bit value 0ah; converts 100Hz to 10Hz
[ 107]    041F: B0 56                                 mov al, 01010110b
[ 108]    0421: E6 86                                 out convcreg, al
[ 109]    0423: B0 0A                                 mov al, 0ah
[ 110]    0425: E6 82                                 out conv10, al
[ 111]        :                                       
[ 112]        :                                       ; third timer (chip 1) mode 1; used for PWM
[ 113]    0427: B0 92                                 mov al, 10010010b
[ 114]    0429: E6 86                                 out convcreg, al
[ 115]    042B: B0 0A                                 mov al, 0ah ; put a value of 10 so that motor is not running at the start
[ 116]    042D: E6 84                                 out pwm, al
[ 117]        :                                       
[ 118]        :                                       ; first timer (chip 2) mode 1; write 8 bits value 01h
[ 119]    042F: B0 08                                 mov al, 00001000b
[ 120]    0431: E6 96                                 out oscreg, al
[ 121]    0433: B0 01                                 mov al, 01h
[ 122]    0435: E6 90                                 out ostimer0, al
[ 123]        :                                       
[ 124]        :                                       ; second timer (chip 2) mode 1; write 8 bits value 20
[ 125]    0437: B0 08                                 mov al, 00001000b
[ 126]    0439: E6 96                                 out oscreg, al
[ 127]    043B: B0 14                                 mov al, 20
[ 128]    043D: E6 92                                 out ostimer1, al
[ 129]        :                                       
[ 130]        :                                       ; initializing 8255
[ 131]        :                                       ; port A output from 8255; for showing current floor value in LED
[ 132]        :                                       ; port B output from 8255; for showing destination floor value in LED
[ 133]        :                                       ; port C upper input; for keyboard columns
[ 134]        :                                       ; port C lower output; for keyboard rows
[ 135]    043F: B0 88                                 mov al, 10001000b
[ 136]    0441: E6 B6                                 out portcreg, al
[ 137]    0443: B0 00                                 mov al, 00h
[ 138]    0445: E6 B2                                 out portb, al ; display zero on the LED, at the start
[ 139]    0447: E6 B0                                 out porta, al ; display zero on the LED, at the start
[ 140]    0449: E6 B4                                 out portc, al ; give zero on keyboard column at the start
[ 141]        :                                       
[ 142]        :                                       ; initialising 8255
[ 143]        :                                       ; port C output from 8255; for giving input signals to motor, lift door and one shot timer
[ 144]    044B: B0 00                                 mov al, 00000000b ; PC0 = 0 initially
[ 145]    044D: E6 C6                                 out bsrcreg, al
[ 146]    044F: B0 02                                 mov al, 00000010b ; PC1 = 0 initially
[ 147]    0451: E6 C6                                 out bsrcreg, al
[ 148]    0453: B0 04                                 mov al, 00000100b ; PC2 = 0 initially
[ 149]    0455: E6 C6                                 out bsrcreg, al
[ 150]    0457: B0 06                                 mov al, 00000110b ; PC3 = 0 initially
[ 151]        :                                       
[ 152]        :                                       
[ 153]        :                                       ; initializing 8259
[ 154]        :                                       ; IR0 = for generating 100 ms one shot timer
[ 155]        :                                       ; IR1 = for keyboard interrupt
[ 156]        :                                       ; IR2 = for Coarse Sensor 1 (CS1)
[ 157]        :                                       ; IR3 = for Coarse Sensor 2 (CS2)
[ 158]        :                                       ; IR4 = for Fine Sensor (FS)
[ 159]    0459: B0 13                                 mov al, 00010011b ; icw 1
[ 160]    045B: E6 A0                                 out intloc1, al
[ 161]    045D: B0 08                                 mov al, 00001000b ; icw 2
[ 162]    045F: E6 A2                                 out intloc2, al
[ 163]    0461: B0 01                                 mov al, 00000001b ; icw 4
[ 164]    0463: E6 A2                                 out intloc2,al
[ 165]    0465: B0 FC                                 mov al, 11111100b ; ocw 1
[ 166]    0467: E6 A2                                 out intloc2, al
[ 167]        :                                       
[ 168]    0469: EB FE                                 infiloop: jmp infiloop
[ 169]        :                                       
[ 170]        :                                       ;-------------------------------------------------------------------------------------------
[ 171]        :                                       
[ 172]        :                                       ;all isrs used in the program
[ 173]        :                                       
[ 174]        :                                       ; ISR for one shot timer
[ 175]    046B:                                       os_isr:
[ 176]    046B: B0 60                                 mov al, 01100000b ; ocw 2 specific EOI for IR0
[ 177]    046D: E6 A0                                 out intloc1, al
[ 178]        :                                       
[ 179]    046F: B1 01                                 mov CL, 01h
[ 180]    0471: CF                                    iret
[ 181]        :                                       
[ 182]        :                                       ; ISR for keyboard
[ 183]    0472:                                       key_isr:
[ 184]    0472: B0 61                                 mov al, 01100001b ; ocw 2 specific EOI for IR1
[ 185]    0474: E6 A0                                 out intloc1, al
[ 186]        :                                       
[ 187]        :                                       ; check for key press
[ 188]    0476: B0 00                                 mov al, 00h
[ 189]    0478: E6 B4                                 out portc, al
[ 190]        :                                       
[ 191]    047A: E4 B4                                 x1: in al, portc
[ 192]    047C: 24 F0                                 and al, 0f0h
[ 193]    047E: 3C F0                                 cmp al, 0f0h
[ 194]    0480: 74 F8                                 jz x1
[ 195]        :                                       
[ 196]        :                                       ; check for key press in column 1
[ 197]    0482: B0 0E                                 mov al, 0eh
[ 198]    0484: 8A D8                                 mov bl, al
[ 199]        :                                       
[ 200]    0486: E6 B4                                 out portc, al
[ 201]    0488: E4 B4                                 in al, portc
[ 202]        :                                       
[ 203]    048A: 24 F0                                 and al, 0f0h
[ 204]    048C: 3C F0                                 cmp al, 0f0h
[ 205]    048E: 75 2A                                 jnz check_key
[ 206]        :                                       
[ 207]        :                                       ; check for key press in column 2
[ 208]    0490: B0 0D                                 mov al, 0dh
[ 209]    0492: 8A D8                                 mov bl, al
[ 210]        :                                       
[ 211]    0494: E6 B4                                 out portc, al
[ 212]    0496: E4 B4                                 in al, portc
[ 213]        :                                       
[ 214]    0498: 24 F0                                 and al, 0f0h
[ 215]    049A: 3C F0                                 cmp al, 0f0h
[ 216]    049C: 75 1C                                 jnz check_key
[ 217]        :                                       
[ 218]        :                                       ; check for key press in column 3
[ 219]    049E: B0 0B                                 mov al, 0bh
[ 220]    04A0: 8A D8                                 mov bl, al
[ 221]        :                                       
[ 222]    04A2: E6 B4                                 out portc, al
[ 223]    04A4: E4 B4                                 in al, portc
[ 224]        :                                       
[ 225]    04A6: 24 F0                                 and al, 0f0h
[ 226]    04A8: 3C F0                                 cmp al, 0f0h
[ 227]    04AA: 75 0E                                 jnz check_key
[ 228]        :                                       
[ 229]        :                                       ; check for key press in column 4
[ 230]    04AC: B0 0B                                 mov al, 0bh
[ 231]    04AE: 8A D8                                 mov bl, al
[ 232]        :                                       
[ 233]    04B0: E6 B4                                 out portc, al
[ 234]    04B2: E4 B4                                 in al, portc
[ 235]        :                                       
[ 236]    04B4: 24 F0                                 and al, 0f0h
[ 237]    04B6: 3C F0                                 cmp al, 0f0h
[ 238]    04B8: 75 00                                 jnz check_key
[ 239]        :                                       
[ 240]        :                                       ; find out which key was pressed from hex keypad
[ 241]        :                                       ; key00 => EEh == CLOSE DOOR
[ 242]        :                                       ; key04 => DEh == UP0
[ 243]        :                                       ; key05 => DDh == DOWN1
[ 244]        :                                       ; key06 => DBh == UP1
[ 245]        :                                       ; key07 => D7h == DOWN2
[ 246]        :                                       ; key08 => BEh == UP2
[ 247]        :                                       ; key09 => BDh == DOWN3
[ 248]        :                                       ; key10 => BBh == LIFT0
[ 249]        :                                       ; key11 => B7h == LIFT1
[ 250]        :                                       ; key12 => 7Eh == LIFT2
[ 251]        :                                       ; key13 => 7Dh == LIFT3
[ 252]        :                                       
[ 253]    04BA:                                       check_key:
[ 254]    04BA: 0A C3                                 or al, bl ; which key is pressed
[ 255]    04BC: 3C EE                                 cmp al, 0eeh
[ 256]    04BE: 75 09                                 jnz x5
[ 257]        :                                       
[ 258]    04C0: B0 00                                 mov al, 00
[ 259]    04C2: E6 B4                                 out portc, al
[ 260]        :                                       
[ 261]    04C4: E8 1E 09                              call drClose
[ 262]    04C7: EB F1                                 jmp check_key
[ 263]        :                                       
[ 264]    04C9: 3C DE                                 x5: cmp al, 0deh
[ 265]    04CB: 75 09                                 jnz x6
[ 266]        :                                       
[ 267]    04CD: B0 00                                 mov al, 00
[ 268]    04CF: E6 B4                                 out portc, al
[ 269]        :                                       
[ 270]    04D1: E8 47 01                              call up0
[ 271]    04D4: EB E4                                 jmp check_key
[ 272]        :                                       
[ 273]    04D6: 3C DD                                 x6: cmp al, 0ddh
[ 274]    04D8: 75 09                                 jnz x7
[ 275]        :                                       
[ 276]    04DA: B0 00                                 mov al, 00
[ 277]    04DC: E6 B4                                 out portc, al
[ 278]        :                                       
[ 279]    04DE: E8 91 01                              call down1
[ 280]    04E1: EB D7                                 jmp check_key
[ 281]        :                                       
[ 282]    04E3: 3C DB                                 x7: cmp al, 0dbh
[ 283]    04E5: 75 09                                 jnz x8
[ 284]        :                                       
[ 285]    04E7: B0 00                                 mov al, 00
[ 286]    04E9: E6 B4                                 out portc, al
[ 287]        :                                       
[ 288]    04EB: E8 8B 03                              call up1
[ 289]    04EE: EB CA                                 jmp check_key
[ 290]        :                                       
[ 291]    04F0: 3C D7                                 x8: cmp al, 0d7h
[ 292]    04F2: 75 09                                 jnz x9
[ 293]        :                                       
[ 294]    04F4: B0 00                                 mov al, 00
[ 295]    04F6: E6 B4                                 out portc, al
[ 296]        :                                       
[ 297]    04F8: E8 80 04                              call down2
[ 298]    04FB: EB BD                                 jmp check_key
[ 299]        :                                       
[ 300]    04FD: 3C BE                                 x9:cmp al, 0beh
[ 301]    04FF: 75 09                                 jnz x10
[ 302]        :                                       
[ 303]    0501: B0 00                                 mov al, 00
[ 304]    0503: E6 B4                                 out portc, al
[ 305]        :                                       
[ 306]    0505: E8 8C 02                              call up2
[ 307]    0508: EB B0                                 jmp check_key
[ 308]        :                                       
[ 309]    050A: 3C BD                                 x10:cmp al, 0bdh
[ 310]    050C: 75 09                                 jnz x11
[ 311]        :                                       
[ 312]    050E: B0 00                                 mov al, 00
[ 313]    0510: E6 B4                                 out portc, al
[ 314]        :                                       
[ 315]    0512: E8 0F 04                              call down3
[ 316]    0515: EB A3                                 jmp check_key
[ 317]        :                                       
[ 318]    0517: 3C BB                                 x11:cmp al, 0bbh
[ 319]    0519: 75 09                                 jnz x12
[ 320]        :                                       
[ 321]    051B: B0 00                                 mov al, 00
[ 322]    051D: E6 B4                                 out portc, al
[ 323]        :                                       
[ 324]    051F: E8 16 05                              call lift0
[ 325]    0522: EB 96                                 jmp check_key
[ 326]        :                                       
[ 327]    0524: 3C B7                                 x12:cmp al, 0b7h
[ 328]    0526: 75 09                                 jnz x13
[ 329]        :                                       
[ 330]    0528: B0 00                                 mov al, 00
[ 331]    052A: E6 B4                                 out portc, al
[ 332]        :                                       
[ 333]    052C: E8 DD 05                              call lift1
[ 334]    052F: EB 89                                 jmp check_key
[ 335]        :                                       
[ 336]    0531: 3C 7E                                 x13:cmp al, 07eh
[ 337]    0533: 75 0A                                 jnz x14
[ 338]        :                                       
[ 339]    0535: B0 00                                 mov al, 00
[ 340]    0537: E6 B4                                 out portc, al
[ 341]        :                                       
[ 342]    0539: E8 D2 06                              call lift2
[ 343]    053C: E9 7B FF                              jmp check_key
[ 344]        :                                       
[ 345]    053F: 3C 7D                                 x14:cmp al, 07dh
[ 346]    0541: 74 03 E9 74 FF                        jnz check_key
[ 347]        :                                       
[ 348]    0546: B0 00                                 mov al, 00
[ 349]    0548: E6 B4                                 out portc, al
[ 350]        :                                       
[ 351]    054A: E8 C4 07                              call lift3
[ 352]    054D: E9 6A FF                              jmp check_key
[ 353]        :                                       
[ 354]        :                                       
[ 355]        :                                       ; ISR for coarse sensor 2
[ 356]    0550:                                       cs2_isr:
[ 357]    0550: 50                                    push ax
[ 358]    0551: 53                                    push bx
[ 359]        :                                       
[ 360]    0552: B0 63                                 mov al, 01100011b ; ocw 2 specific EOI for IR3
[ 361]    0554: E6 A0                                 out intloc1, al
[ 362]        :                                       
[ 363]    0556: A0 10 04                              mov al, dir
[ 364]    0559: 8A 26 12 04                           mov ah, current
[ 365]    055D: 8A 1E 0E 04                           mov bl, dest
[ 366]        :                                       
[ 367]    0561: 3C 00                                 cmp al, 00h
[ 368]    0563: 75 06                                 jnz dir_down
[ 369]        :                                       
[ 370]    0565: E8 D8 08                              call accel50
[ 371]        :                                       
[ 372]    0568: 5B                                    pop bx
[ 373]    0569: 58                                    pop ax
[ 374]    056A: CF                                    iret
[ 375]        :                                       
[ 376]        :                                       
[ 377]    056B:                                       dir_down:
[ 378]    056B: FE CC                                 dec ah
[ 379]    056D: 3A E3                                 cmp ah, bl
[ 380]    056F: 75 FA                                 jnz dir_down
[ 381]        :                                       
[ 382]    0571: E8 D3 08                              call decel20
[ 383]        :                                       
[ 384]    0574: 5B                                    pop bx
[ 385]    0575: 58                                    pop ax
[ 386]    0576: CF                                    iret
[ 387]        :                                       
[ 388]        :                                       ; SR for coarse sensor 1
[ 389]    0577:                                       cs1_isr:
[ 390]    0577: 50                                    push ax
[ 391]    0578: 53                                    push bx
[ 392]        :                                       
[ 393]    0579: B0 62                                 mov al, 01100010b ; ocw 2 specific EOI for IR2
[ 394]    057B: E6 A0                                 out intloc1, al
[ 395]        :                                       
[ 396]    057D: A0 10 04                              mov al, dir
[ 397]    0580: 8A 26 12 04                           mov ah, current
[ 398]    0584: 8A 1E 0E 04                           mov bl, dest
[ 399]        :                                       
[ 400]    0588: 80 3E 10 04 01                        cmp dir, 01
[ 401]    058D: 75 06                                 jnz dir_up
[ 402]        :                                       
[ 403]    058F: E8 AE 08                              call accel50
[ 404]    0592: 5B                                    pop bx
[ 405]    0593: 58                                    pop ax
[ 406]    0594: CF                                    iret
[ 407]        :                                       
[ 408]        :                                       
[ 409]    0595:                                       dir_up:
[ 410]    0595: FE C4                                 inc ah
[ 411]    0597: 3A E3                                 cmp ah, bl
[ 412]    0599: 75 FA                                 jnz dir_up
[ 413]        :                                       
[ 414]    059B: E8 A9 08                              call decel20
[ 415]        :                                       
[ 416]    059E: 5B                                    pop bx
[ 417]    059F: 58                                    pop ax
[ 418]    05A0: CF                                    iret
[ 419]        :                                       
[ 420]        :                                       ; SR for fine sensor
[ 421]    05A1:                                       fs_isr:
[ 422]    05A1: 50                                    push ax
[ 423]    05A2: 53                                    push bx
[ 424]        :                                       
[ 425]    05A3: B0 64                                 mov al, 01100100b ; ocw 2 specific EOI for IR4
[ 426]    05A5: E6 A0                                 out intloc1, al
[ 427]        :                                       
[ 428]    05A7: A0 0D 04                              mov al, liftMove
[ 429]    05AA: 8A 26 12 04                           mov ah, current
[ 430]    05AE: 8A 1E 0E 04                           mov bl, dest
[ 431]    05B2: 8A 3E 10 04                           mov bh, dir
[ 432]        :                                       
[ 433]    05B6: 3C 01                                 cmp al, 01h
[ 434]    05B8: 75 47                                 jnz f2
[ 435]        :                                       
[ 436]    05BA: 80 FF 00                              cmp bh, 00h
[ 437]    05BD: 75 21                                 jnz f4
[ 438]        :                                       
[ 439]    05BF: FE CC                                 dec ah
[ 440]    05C1: 88 26 12 04                           mov current, ah
[ 441]    05C5: 3A E3                                 cmp ah, bl
[ 442]    05C7: 75 3B                                 jnz f1
[ 443]        :                                       
[ 444]    05C9: E8 7B 08                              call decel20
[ 445]    05CC: E8 22 08                              call ledDisp
[ 446]        :                                       
[ 447]    05CF: C6 06 11 04 00                        mov drState, 00h
[ 448]    05D4: B0 04                                 mov AL, 04h
[ 449]    05D6: E6 C6                                 out bsrcreg, AL
[ 450]        :                                       
[ 451]    05D8: C6 06 0D 04 00                        mov liftMove, 00h
[ 452]        :                                       
[ 453]    05DD: 5B                                    pop bx
[ 454]    05DE: 58                                    pop ax
[ 455]    05DF: CF                                    iret
[ 456]        :                                       
[ 457]        :                                       
[ 458]    05E0:                                       f4:
[ 459]    05E0: FE C4                                 inc ah
[ 460]    05E2: 88 26 12 04                           mov current, ah
[ 461]    05E6: 3A E3                                 cmp ah, bl
[ 462]    05E8: 75 1A                                 jnz f1
[ 463]        :                                       
[ 464]    05EA: E8 5A 08                              call decel20
[ 465]    05ED: E8 01 08                              call ledDisp
[ 466]        :                                       
[ 467]    05F0: C6 06 11 04 00                        mov drState, 00h
[ 468]    05F5: B0 04                                 mov AL, 04h
[ 469]    05F7: E6 C6                                 out bsrcreg, AL
[ 470]        :                                       
[ 471]    05F9: C6 06 0D 04 00                        mov liftMove, 00h
[ 472]        :                                       
[ 473]    05FE: 5B                                    pop bx
[ 474]    05FF: 58                                    pop ax
[ 475]    0600: CF                                    iret
[ 476]        :                                       
[ 477]        :                                       
[ 478]    0601:                                       f2:
[ 479]    0601: 5B                                    pop bx
[ 480]    0602: 58                                    pop ax
[ 481]    0603: CF                                    iret
[ 482]        :                                       
[ 483]        :                                       
[ 484]    0604:                                       f1:
[ 485]    0604: 80 FF 00                              cmp bh, 00h
[ 486]    0607: 75 09                                 jnz f3
[ 487]        :                                       
[ 488]    0609: FE CC                                 dec ah
[ 489]    060B: 88 26 12 04                           mov current, ah
[ 490]        :                                       
[ 491]    060F: 5B                                    pop bx
[ 492]    0610: 58                                    pop ax
[ 493]    0611: CF                                    iret
[ 494]        :                                       
[ 495]        :                                       
[ 496]    0612:                                       f3:
[ 497]    0612: FE C4                                 inc ah
[ 498]    0614: 88 26 12 04                           mov current, ah
[ 499]        :                                       
[ 500]    0618: 5B                                    pop bx
[ 501]    0619: 58                                    pop ax
[ 502]    061A: CF                                    iret
[ 503]        :                                       
[ 504]        :                                       
[ 505]        :                                       ; -------------------------------------------------------------------------------------
[ 506]        :                                       
[ 507]        :                                       ; all subroutines used in ISR
[ 508]    061B:                                       up0 proc near
[ 509]    061B: 50                                    push ax
[ 510]    061C: 53                                    push bx
[ 511]    061D: 51                                    push cx
[ 512]        :                                       
[ 513]    061E: A0 12 04                              mov al, current
[ 514]    0621: 8A 26 0D 04                           mov ah, liftMove
[ 515]    0625: 8A 1E 11 04                           mov bl, drState
[ 516]        :                                       
[ 517]    0629: 3C 00                                 cmp al,00
[ 518]    062B: 75 12                                 jnz y2
[ 519]        :                                       
[ 520]    062D: 80 FC 00                              cmp ah,00
[ 521]    0630: 75 0D                                 jnz y2
[ 522]        :                                       
[ 523]        :                                       
[ 524]    0632:                                       y1:
[ 525]    0632: C6 06 11 04 00                        mov drState, 00h
[ 526]    0637: B0 04                                 mov AL, 04h
[ 527]    0639: E6 C6                                 out bsrcreg, AL
[ 528]        :                                       
[ 529]    063B: 59                                    pop cx
[ 530]    063C: 5B                                    pop bx
[ 531]    063D: 58                                    pop ax
[ 532]    063E: C3                                    ret
[ 533]        :                                       
[ 534]        :                                       
[ 535]    063F:                                       y2:
[ 536]    063F: 80 FC 00                              cmp ah, 00
[ 537]    0642: 75 FB                                 jnz y2
[ 538]        :                                       
[ 539]    0644: 3C 00                                 cmp al, 00
[ 540]    0646: 74 EA                                 jz y1
[ 541]        :                                       
[ 542]    0648: C6 06 0E 04 00                        mov dest, 00
[ 543]    064D: C6 06 10 04 00                        mov dir, 00
[ 544]    0652: B0 02                                 mov AL, 02h
[ 545]    0654: E6 C6                                 out bsrcreg,al
[ 546]        :                                       
[ 547]    0656: C6 06 11 04 01                        mov drState, 01h
[ 548]    065B: B0 05                                 mov AL, 05h
[ 549]    065D: E6 C6                                 out bsrcreg, AL
[ 550]        :                                       
[ 551]    065F: B1 00                                 mov cl, 0
[ 552]    0661: 80 F9 01                              q1: cmp cl, 1
[ 553]    0664: 75 FB                                 jne q1
[ 554]        :                                       
[ 555]    0666: C6 06 0D 04 01                        mov liftMove, 01
[ 556]    066B: E8 A3 07                              call liftstar
[ 557]        :                                       
[ 558]    066E: 59                                    pop cx
[ 559]    066F: 5B                                    pop bx
[ 560]    0670: 58                                    pop ax
[ 561]    0671: C3                                    ret
[ 562]        :                                       up0 endp
[ 563]        :                                       
[ 564]        :                                       
[ 565]    0672:                                       down1 proc near
[ 566]    0672: 50                                    push ax
[ 567]    0673: 53                                    push bx
[ 568]    0674: 51                                    push cx
[ 569]        :                                       
[ 570]    0675: A0 12 04                              mov al, current
[ 571]    0678: 8A 26 0D 04                           mov ah, liftMove
[ 572]    067C: 8A 1E 11 04                           mov bl, drState
[ 573]    0680: 8A 3E 10 04                           mov bh, dir
[ 574]        :                                       
[ 575]    0684: 3C 01                                 cmp al, 01
[ 576]    0686: 74 03 E9 83 00                        jnz y3
[ 577]        :                                       
[ 578]    068B: 80 FC 01                              cmp ah, 01
[ 579]    068E: 75 71                                 jnz y4
[ 580]        :                                       
[ 581]        :                                       
[ 582]    0690: 80 FC 01                              y5: cmp ah, 01
[ 583]    0693: 74 FB                                 jz y5
[ 584]        :                                       
[ 585]        :                                       
[ 586]    0695:                                       y11:
[ 587]    0695: C6 06 0E 04 01                        mov dest, 01
[ 588]    069A: C6 06 10 04 00                        mov dir, 00
[ 589]    069F: B0 02                                 mov al, 02h
[ 590]    06A1: E6 C6                                 out bsrcreg, al
[ 591]        :                                       
[ 592]    06A3: C6 06 11 04 01                        mov drState, 01h
[ 593]    06A8: B0 05                                 mov AL, 05h
[ 594]    06AA: E6 C6                                 out bsrcreg, AL
[ 595]        :                                       
[ 596]    06AC: B1 00                                 mov cl, 0
[ 597]    06AE: 80 F9 01                              q8: cmp cl, 1
[ 598]    06B1: 75 FB                                 jne q8
[ 599]        :                                       
[ 600]    06B3: C6 06 0D 04 01                        mov liftMove, 01
[ 601]    06B8: E8 56 07                              call liftstar
[ 602]        :                                       
[ 603]    06BB: 80 FC 00                              cmp ah, 00
[ 604]    06BE: 75 1C                                 jnz y12
[ 605]        :                                       
[ 606]    06C0: C6 06 10 04 01                        mov dir, 01
[ 607]    06C5: B0 03                                 mov al,03H
[ 608]    06C7: E6 C6                                 out bsrcreg,al
[ 609]        :                                       
[ 610]    06C9: B1 00                                 mov cl, 0
[ 611]    06CB: 80 F9 01                              q2: cmp cl, 1
[ 612]    06CE: 75 FB                                 jne q2
[ 613]        :                                       
[ 614]    06D0: C6 06 0D 04 01                        mov liftMove, 1
[ 615]    06D5: E8 39 07                              call liftstar
[ 616]        :                                       
[ 617]    06D8: 59                                    pop cx
[ 618]    06D9: 5B                                    pop bx
[ 619]    06DA: 58                                    pop ax
[ 620]    06DB: C3                                    ret
[ 621]        :                                       
[ 622]        :                                       
[ 623]    06DC:                                       y12:
[ 624]    06DC: C6 06 11 04 00                        mov drState, 00h
[ 625]    06E1: B0 04                                 mov AL, 04h
[ 626]    06E3: E6 C6                                 out bsrcreg, AL
[ 627]        :                                       
[ 628]    06E5: C6 06 10 04 00                        mov dir, 00
[ 629]    06EA: B0 02                                 mov AL, 02h
[ 630]    06EC: E6 C6                                 out bsrcreg,al
[ 631]        :                                       
[ 632]    06EE: B1 00                                 mov cl, 0
[ 633]    06F0: 80 F9 01                              q3: cmp cl, 1
[ 634]    06F3: 75 FB                                 jne q3
[ 635]        :                                       
[ 636]    06F5: C6 06 0D 04 01                        mov liftMove, 01
[ 637]    06FA: E8 14 07                              call liftstar
[ 638]        :                                       
[ 639]    06FD: 59                                    pop cx
[ 640]    06FE: 5B                                    pop bx
[ 641]    06FF: 58                                    pop ax
[ 642]    0700: C3                                    ret
[ 643]        :                                       
[ 644]        :                                       
[ 645]    0701:                                       y4:
[ 646]    0701: C6 06 11 04 00                        mov drState, 00h
[ 647]    0706: B0 04                                 mov AL, 04h
[ 648]    0708: E6 C6                                 out bsrcreg, AL
[ 649]        :                                       
[ 650]    070A: 59                                    pop cx
[ 651]    070B: 5B                                    pop bx
[ 652]    070C: 58                                    pop ax
[ 653]    070D: C3                                    ret
[ 654]        :                                       
[ 655]    070E:                                       y3:
[ 656]    070E: 80 FC 01                              cmp ah, 01
[ 657]    0711: 75 55                                 jnz y6
[ 658]        :                                       
[ 659]    0713: 80 FF 00                              cmp bh, 0
[ 660]    0716: 75 49                                 jnz y7
[ 661]        :                                       
[ 662]    0718: 3C 02                                 cmp al, 2
[ 663]    071A: 75 0D                                 jnz y8
[ 664]        :                                       
[ 665]        :                                       
[ 666]    071C:                                       y9:
[ 667]    071C: 8A 0E 0E 04                           mov cl, dest
[ 668]    0720: 88 0E 0F 04                           mov secdest, cl
[ 669]    0724: C6 06 0E 04 01                        mov dest,1
[ 670]        :                                       
[ 671]        :                                       
[ 672]    0729:                                       y8:
[ 673]    0729: 8A 0E 0E 04                           mov cl, dest
[ 674]    072D: 80 F9 02                              cmp cl, 02
[ 675]    0730: 75 EA                                 jnz y9
[ 676]        :                                       
[ 677]        :                                       
[ 678]    0732:                                       y10:
[ 679]    0732: 80 FC 00                              cmp ah, 00
[ 680]    0735: 75 FB                                 jnz y10
[ 681]        :                                       
[ 682]    0737: C6 06 0E 04 01                        mov dest, 01
[ 683]    073C: C6 06 11 04 01                        mov drState, 01h
[ 684]    0741: B0 05                                 mov AL, 05h
[ 685]    0743: E6 C6                                 out bsrcreg, AL
[ 686]        :                                       
[ 687]    0745: C6 06 10 04 00                        mov dir, 00
[ 688]    074A: B0 02                                 mov AL, 02h
[ 689]    074C: E6 C6                                 out bsrcreg,al
[ 690]        :                                       
[ 691]    074E: B1 00                                 mov cl, 0
[ 692]    0750: 80 F9 01                              q4: cmp cl, 1
[ 693]    0753: 75 FB                                 jne q4
[ 694]        :                                       
[ 695]    0755: C6 06 0D 04 01                        mov liftMove, 01
[ 696]    075A: E8 B4 06                              call liftstar
[ 697]        :                                       
[ 698]    075D: 59                                    pop cx
[ 699]    075E: 5B                                    pop bx
[ 700]    075F: 58                                    pop ax
[ 701]    0760: C3                                    ret
[ 702]        :                                       
[ 703]        :                                       
[ 704]    0761:                                       y7:
[ 705]    0761: 80 FC 00                              cmp ah, 00
[ 706]    0764: 75 FB                                 jnz y7
[ 707]    0766: EB 00                                 jmp y6
[ 708]        :                                       
[ 709]        :                                       
[ 710]    0768:                                       y6:
[ 711]    0768: 3C 01                                 cmp al, 01
[ 712]    076A: 74 03 E9 26 FF                        jnz y11
[ 713]        :                                       
[ 714]    076F: C6 06 10 04 00                        mov dir, 00
[ 715]    0774: B0 02                                 mov al, 02h
[ 716]    0776: E6 C6                                 out bsrcreg, al
[ 717]        :                                       
[ 718]    0778: C6 06 11 04 00                        mov drState, 00h
[ 719]    077D: B0 04                                 mov AL, 04h
[ 720]    077F: E6 C6                                 out bsrcreg, AL
[ 721]        :                                       
[ 722]    0781: B1 00                                 mov cl, 0
[ 723]    0783: 80 F9 01                              q9: cmp cl, 1
[ 724]    0786: 75 FB                                 jne q9
[ 725]        :                                       
[ 726]    0788: C6 06 0D 04 01                        mov liftMove, 01
[ 727]    078D: E8 81 06                              call liftstar
[ 728]        :                                       
[ 729]    0790: 59                                    pop cx
[ 730]    0791: 5B                                    pop bx
[ 731]    0792: 58                                    pop ax
[ 732]    0793: C3                                    ret
[ 733]        :                                       down1 endp
[ 734]        :                                       
[ 735]        :                                       
[ 736]    0794:                                       up2 proc near
[ 737]    0794: 50                                    push ax
[ 738]    0795: 53                                    push bx
[ 739]    0796: 51                                    push cx
[ 740]        :                                       
[ 741]    0797: A0 12 04                              mov al, current
[ 742]    079A: 8A 26 0D 04                           mov ah, liftMove
[ 743]    079E: 8A 1E 11 04                           mov bl, drState
[ 744]    07A2: 8A 3E 10 04                           mov bh, dir
[ 745]        :                                       
[ 746]    07A6: 3C 02                                 cmp al, 02
[ 747]    07A8: 75 61                                 jnz up2y3
[ 748]        :                                       
[ 749]    07AA: 80 FC 01                              cmp ah, 01
[ 750]    07AD: 75 4F                                 jnz up2y4
[ 751]        :                                       
[ 752]        :                                       
[ 753]    07AF: 80 FC 01                              up2y5: cmp ah, 01
[ 754]    07B2: 74 FB                                 jz up2y5
[ 755]        :                                       
[ 756]        :                                       
[ 757]    07B4:                                       up2y11:
[ 758]    07B4: C6 06 0E 04 02                        mov dest, 02
[ 759]    07B9: C6 06 11 04 01                        mov drState, 01h
[ 760]    07BE: B0 05                                 mov AL, 05h
[ 761]    07C0: E6 C6                                 out bsrcreg, AL
[ 762]        :                                       
[ 763]    07C2: 3C 03                                 cmp al, 03
[ 764]    07C4: 75 1C                                 jnz up2y12
[ 765]        :                                       
[ 766]    07C6: C6 06 10 04 00                        mov dir, 00
[ 767]    07CB: B0 02                                 mov AL, 02h
[ 768]    07CD: E6 C6                                 out bsrcreg,al
[ 769]        :                                       
[ 770]    07CF: B1 00                                 mov cl, 0
[ 771]    07D1: 80 F9 01                              q5: cmp cl, 1
[ 772]    07D4: 75 FB                                 jne q5
[ 773]        :                                       
[ 774]    07D6: C6 06 0D 04 01                        mov liftMove, 01
[ 775]    07DB: E8 33 06                              call liftstar
[ 776]        :                                       
[ 777]    07DE: 59                                    pop cx
[ 778]    07DF: 5B                                    pop bx
[ 779]    07E0: 58                                    pop ax
[ 780]    07E1: C3                                    ret
[ 781]        :                                       
[ 782]        :                                       
[ 783]    07E2:                                       up2y12:
[ 784]    07E2: C6 06 10 04 01                        mov dir, 01
[ 785]    07E7: B0 03                                 mov al,03H
[ 786]    07E9: E6 C6                                 out bsrcreg,al
[ 787]        :                                       
[ 788]    07EB: B1 00                                 mov cl, 0
[ 789]    07ED: 80 F9 01                              q6: cmp cl, 1
[ 790]    07F0: 75 FB                                 jne q6
[ 791]        :                                       
[ 792]    07F2: C6 06 0D 04 01                        mov liftMove, 01
[ 793]    07F7: E8 17 06                              call liftstar
[ 794]        :                                       
[ 795]    07FA: 59                                    pop cx
[ 796]    07FB: 5B                                    pop bx
[ 797]    07FC: 58                                    pop ax
[ 798]    07FD: C3                                    ret
[ 799]        :                                       
[ 800]        :                                       
[ 801]    07FE:                                       up2y4:
[ 802]    07FE: C6 06 11 04 00                        mov drState, 00h
[ 803]    0803: B0 04                                 mov AL, 04h
[ 804]    0805: E6 C6                                 out bsrcreg, AL
[ 805]        :                                       
[ 806]    0807: 59                                    pop cx
[ 807]    0808: 5B                                    pop bx
[ 808]    0809: 58                                    pop ax
[ 809]    080A: C3                                    ret
[ 810]        :                                       
[ 811]        :                                       
[ 812]    080B:                                       up2y3:
[ 813]    080B: 80 FC 01                              cmp ah, 01
[ 814]    080E: 75 55                                 jnz up2y6
[ 815]        :                                       
[ 816]    0810: 80 FF 01                              cmp bh, 1
[ 817]    0813: 75 49                                 jnz up2y7
[ 818]        :                                       
[ 819]    0815: 3C 01                                 cmp al, 1
[ 820]    0817: 75 0D                                 jnz up2y8
[ 821]        :                                       
[ 822]        :                                       
[ 823]    0819:                                       up2y9:
[ 824]    0819: 8A 0E 0E 04                           mov cl, dest
[ 825]    081D: 88 0E 0F 04                           mov secdest, cl
[ 826]    0821: C6 06 0E 04 02                        mov dest, 2
[ 827]        :                                       
[ 828]        :                                       
[ 829]    0826:                                       up2y8:
[ 830]    0826: 8A 0E 0E 04                           mov cl, dest
[ 831]    082A: 80 F9 01                              cmp cl, 01
[ 832]    082D: 75 EA                                 jnz up2y9
[ 833]        :                                       
[ 834]        :                                       
[ 835]    082F:                                       up2y10:
[ 836]    082F: 80 FC 01                              cmp ah, 01
[ 837]    0832: 74 FB                                 jz up2y10
[ 838]        :                                       
[ 839]    0834: C6 06 0E 04 02                        mov dest, 02
[ 840]    0839: C6 06 11 04 01                        mov drState, 01h
[ 841]    083E: B0 05                                 mov AL, 05h
[ 842]    0840: E6 C6                                 out bsrcreg, AL
[ 843]        :                                       
[ 844]    0842: C6 06 10 04 01                        mov dir, 01
[ 845]    0847: B0 03                                 mov al,03H
[ 846]    0849: E6 C6                                 out bsrcreg,al
[ 847]        :                                       
[ 848]    084B: B1 00                                 mov cl, 0
[ 849]    084D: 80 F9 01                              q7: cmp cl, 1
[ 850]    0850: 75 FB                                 jne q7
[ 851]        :                                       
[ 852]    0852: C6 06 0D 04 01                        mov liftMove, 01
[ 853]    0857: E8 B7 05                              call liftstar
[ 854]        :                                       
[ 855]    085A: 59                                    pop cx
[ 856]    085B: 5B                                    pop bx
[ 857]    085C: 58                                    pop ax
[ 858]    085D: C3                                    ret
[ 859]        :                                       
[ 860]        :                                       
[ 861]    085E:                                       up2y7:
[ 862]    085E: 80 FC 01                              cmp ah, 01
[ 863]    0861: 74 FB                                 jz up2y7
[ 864]        :                                       
[ 865]    0863: EB 00                                 jmp up2y6
[ 866]        :                                       
[ 867]        :                                       
[ 868]    0865:                                       up2y6:
[ 869]    0865: 3C 02                                 cmp al, 02
[ 870]    0867: 74 03 E9 48 FF                        jnz up2y11
[ 871]        :                                       
[ 872]    086C: C6 06 11 04 00                        mov drState, 00h
[ 873]    0871: B0 04                                 mov AL, 04h
[ 874]    0873: E6 C6                                 out bsrcreg, AL
[ 875]        :                                       
[ 876]    0875: 59                                    pop cx
[ 877]    0876: 5B                                    pop bx
[ 878]    0877: 58                                    pop ax
[ 879]    0878: C3                                    ret
[ 880]        :                                       up2 endp
[ 881]        :                                       
[ 882]        :                                       
[ 883]    0879:                                       up1 proc near
[ 884]    0879: 50                                    push ax
[ 885]    087A: 53                                    push bx
[ 886]    087B: 51                                    push cx
[ 887]        :                                       
[ 888]    087C: A0 12 04                              mov al, current
[ 889]    087F: 8A 26 0D 04                           mov ah, liftMove
[ 890]    0883: 8A 1E 11 04                           mov bl, drState
[ 891]    0887: 8A 3E 10 04                           mov bh, dir
[ 892]        :                                       
[ 893]    088B: 3C 01                                 cmp al, 01
[ 894]    088D: 75 62                                 jnz up1y3
[ 895]        :                                       
[ 896]    088F: 80 FC 01                              cmp ah, 01
[ 897]    0892: 75 50                                 jnz up1y4
[ 898]        :                                       
[ 899]        :                                       
[ 900]    0894: 80 FC 01                              up1y5: cmp ah, 01
[ 901]    0897: 74 FB                                 jz up1y5
[ 902]        :                                       
[ 903]        :                                       
[ 904]    0899:                                       up1y11:
[ 905]    0899: C6 06 0E 04 01                        mov dest, 01
[ 906]    089E: C6 06 11 04 01                        mov drState, 01h
[ 907]    08A3: B0 05                                 mov AL, 05h
[ 908]    08A5: E6 C6                                 out bsrcreg, AL
[ 909]        :                                       
[ 910]    08A7: 80 FC 00                              cmp ah, 00
[ 911]    08AA: 75 1C                                 jnz up1y12
[ 912]        :                                       
[ 913]    08AC: C6 06 10 04 01                        mov dir, 01
[ 914]    08B1: B0 03                                 mov al,03H
[ 915]    08B3: E6 C6                                 out bsrcreg,al
[ 916]        :                                       
[ 917]    08B5: B1 00                                 mov cl, 0
[ 918]    08B7: 80 F9 01                              q10:cmp cl, 1
[ 919]    08BA: 75 FB                                 jne q10
[ 920]        :                                       
[ 921]    08BC: C6 06 0D 04 01                        mov liftMove, 01
[ 922]    08C1: E8 4D 05                              call liftstar
[ 923]        :                                       
[ 924]    08C4: 59                                    pop cx
[ 925]    08C5: 5B                                    pop bx
[ 926]    08C6: 58                                    pop ax
[ 927]    08C7: C3                                    ret
[ 928]        :                                       
[ 929]        :                                       
[ 930]    08C8:                                       up1y12:
[ 931]    08C8: C6 06 10 04 00                        mov dir, 00
[ 932]    08CD: B0 02                                 mov AL, 02h
[ 933]    08CF: E6 C6                                 out bsrcreg,al
[ 934]        :                                       
[ 935]    08D1: B1 00                                 mov cl, 0
[ 936]    08D3: 80 F9 01                              q11:cmp cl, 1
[ 937]    08D6: 75 FB                                 jne q11
[ 938]        :                                       
[ 939]    08D8: C6 06 0D 04 01                        mov liftMove, 01
[ 940]    08DD: E8 31 05                              call liftstar
[ 941]        :                                       
[ 942]    08E0: 59                                    pop cx
[ 943]    08E1: 5B                                    pop bx
[ 944]    08E2: 58                                    pop ax
[ 945]    08E3: C3                                    ret
[ 946]        :                                       
[ 947]        :                                       
[ 948]    08E4:                                       up1y4:
[ 949]    08E4: C6 06 11 04 00                        mov drState, 00h
[ 950]    08E9: B0 04                                 mov AL, 04h
[ 951]    08EB: E6 C6                                 out bsrcreg, AL
[ 952]        :                                       
[ 953]    08ED: 59                                    pop cx
[ 954]    08EE: 5B                                    pop bx
[ 955]    08EF: 58                                    pop ax
[ 956]    08F0: C3                                    ret
[ 957]        :                                       
[ 958]        :                                       
[ 959]    08F1:                                       up1y3:
[ 960]    08F1: 80 FC 01                              cmp ah, 01
[ 961]    08F4: 75 1D                                 jnz up1y6
[ 962]        :                                       
[ 963]    08F6: 80 FF 01                              cmp bh, 1
[ 964]    08F9: 75 11                                 jnz up1y7
[ 965]        :                                       
[ 966]        :                                       
[ 967]    08FB:                                       up1y9:
[ 968]    08FB: 8A 0E 0E 04                           mov cl, dest
[ 969]    08FF: 88 0E 0F 04                           mov secdest, cl
[ 970]    0903: C6 06 0E 04 01                        mov dest, 1
[ 971]        :                                       
[ 972]    0908: 59                                    pop cx
[ 973]    0909: 5B                                    pop bx
[ 974]    090A: 58                                    pop ax
[ 975]    090B: C3                                    ret
[ 976]        :                                       
[ 977]        :                                       
[ 978]    090C:                                       up1y7:
[ 979]    090C: 80 FC 00                              cmp ah, 00
[ 980]    090F: 75 FB                                 jnz up1y7
[ 981]    0911: EB 00                                 jmp up1y6
[ 982]        :                                       
[ 983]        :                                       
[ 984]    0913:                                       up1y6:
[ 985]    0913: 3C 01                                 cmp al, 01
[ 986]    0915: 75 82                                 jnz up1y11
[ 987]        :                                       
[ 988]    0917: C6 06 11 04 00                        mov drState, 00h
[ 989]    091C: B0 04                                 mov AL, 04h
[ 990]    091E: E6 C6                                 out bsrcreg, AL
[ 991]        :                                       
[ 992]    0920: 59                                    pop cx
[ 993]    0921: 5B                                    pop bx
[ 994]    0922: 58                                    pop ax
[ 995]    0923: C3                                    ret
[ 996]        :                                       up1 endp
[ 997]        :                                       
[ 998]        :                                       
[ 999]    0924:                                       down3 proc near
[1000]    0924: 50                                    push ax
[1001]    0925: 53                                    push bx
[1002]    0926: 51                                    push cx
[1003]        :                                       
[1004]    0927: A0 12 04                              mov al, current
[1005]    092A: 8A 26 0D 04                           mov ah, liftMove
[1006]    092E: 8A 1E 11 04                           mov bl, drState
[1007]        :                                       
[1008]    0932: 3C 03                                 cmp al, 03
[1009]    0934: 75 12                                 jnz dn3y2
[1010]        :                                       
[1011]    0936: 80 FC 00                              cmp ah, 00
[1012]    0939: 75 0D                                 jnz dn3y2
[1013]        :                                       
[1014]        :                                       
[1015]    093B:                                       dn3y1:
[1016]    093B: C6 06 11 04 00                        mov drState, 00h
[1017]    0940: B0 04                                 mov AL, 04h
[1018]    0942: E6 C6                                 out bsrcreg, AL
[1019]        :                                       
[1020]    0944: 59                                    pop cx
[1021]    0945: 5B                                    pop bx
[1022]    0946: 58                                    pop ax
[1023]    0947: C3                                    ret
[1024]        :                                       
[1025]        :                                       
[1026]    0948:                                       dn3y2:
[1027]    0948: 80 FC 00                              cmp ah, 00
[1028]    094B: 75 FB                                 jnz dn3y2
[1029]        :                                       
[1030]    094D: 3C 03                                 cmp al, 03
[1031]    094F: 74 EA                                 jz dn3y1
[1032]        :                                       
[1033]    0951: C6 06 0E 04 00                        mov dest, 00
[1034]    0956: C6 06 10 04 00                        mov dir, 00
[1035]    095B: B0 02                                 mov AL, 02h
[1036]    095D: E6 C6                                 out bsrcreg,al
[1037]        :                                       
[1038]    095F: C6 06 11 04 01                        mov drState, 01h
[1039]    0964: B0 05                                 mov AL, 05h
[1040]    0966: E6 C6                                 out bsrcreg, AL
[1041]        :                                       
[1042]    0968: B1 00                                 mov cl, 0
[1043]    096A: 80 F9 01                              q12:cmp cl, 1
[1044]    096D: 75 FB                                 jne q12
[1045]        :                                       
[1046]    096F: C6 06 0D 04 01                        mov liftMove, 01
[1047]    0974: E8 9A 04                              call liftstar
[1048]        :                                       
[1049]    0977: 59                                    pop cx
[1050]    0978: 5B                                    pop bx
[1051]    0979: 58                                    pop ax
[1052]    097A: C3                                    ret
[1053]        :                                       down3 endp
[1054]        :                                       
[1055]    097B:                                       down2 proc near
[1056]    097B: 50                                    push ax
[1057]    097C: 53                                    push bx
[1058]    097D: 51                                    push cx
[1059]        :                                       
[1060]    097E: A0 12 04                              mov al, current
[1061]    0981: 8A 26 0D 04                           mov ah, liftMove
[1062]    0985: 8A 1E 11 04                           mov bl, drState
[1063]    0989: 8A 3E 10 04                           mov bh, dir
[1064]        :                                       
[1065]    098D: 3C 02                                 cmp al, 02
[1066]    098F: 75 71                                 jnz dn2y3
[1067]        :                                       
[1068]    0991: 80 FC 01                              cmp ah, 01
[1069]    0994: 75 5F                                 jnz dn2y4
[1070]        :                                       
[1071]        :                                       
[1072]    0996: 80 FC 01                              dn2y5: cmp ah, 01
[1073]    0999: 74 FB                                 jz dn2y5
[1074]        :                                       
[1075]        :                                       
[1076]    099B:                                       dn2y11:
[1077]    099B: C6 06 0E 04 01                        mov dest, 01
[1078]    09A0: C6 06 11 04 01                        mov drState, 01h
[1079]    09A5: B0 05                                 mov AL, 05h
[1080]    09A7: E6 C6                                 out bsrcreg, AL
[1081]        :                                       
[1082]    09A9: B1 00                                 mov cl, 0
[1083]    09AB: 80 F9 01                              q13:cmp cl, 1
[1084]    09AE: 75 FB                                 jne q13
[1085]        :                                       
[1086]    09B0: C6 06 0D 04 01                        mov liftMove, 01
[1087]    09B5: E8 59 04                              call liftstar
[1088]        :                                       
[1089]    09B8: 80 FC 03                              cmp ah, 03
[1090]    09BB: 75 1C                                 jnz dn2y12
[1091]        :                                       
[1092]    09BD: C6 06 10 04 00                        mov dir, 00
[1093]    09C2: B0 02                                 mov AL, 02h
[1094]    09C4: E6 C6                                 out bsrcreg,al
[1095]        :                                       
[1096]    09C6: B1 00                                 mov cl, 0
[1097]    09C8: 80 F9 01                              q14:cmp cl, 1
[1098]    09CB: 75 FB                                 jne q14
[1099]        :                                       
[1100]    09CD: C6 06 0D 04 01                        mov liftMove, 01
[1101]    09D2: E8 3C 04                              call liftstar
[1102]        :                                       
[1103]    09D5: 59                                    pop cx
[1104]    09D6: 5B                                    pop bx
[1105]    09D7: 58                                    pop ax
[1106]    09D8: C3                                    ret
[1107]        :                                       
[1108]        :                                       
[1109]    09D9:                                       dn2y12:
[1110]    09D9: C6 06 10 04 01                        mov dir, 01
[1111]    09DE: B0 03                                 mov al,03H
[1112]    09E0: E6 C6                                 out bsrcreg,al
[1113]        :                                       
[1114]    09E2: B1 00                                 mov cl, 0
[1115]    09E4: 80 F9 01                              q15:cmp cl, 1
[1116]    09E7: 75 FB                                 jne q15
[1117]        :                                       
[1118]    09E9: C6 06 0D 04 01                        mov liftMove, 01
[1119]    09EE: E8 20 04                              call liftstar
[1120]        :                                       
[1121]    09F1: 59                                    pop cx
[1122]    09F2: 5B                                    pop bx
[1123]    09F3: 58                                    pop ax
[1124]    09F4: C3                                    ret
[1125]        :                                       
[1126]        :                                       
[1127]    09F5:                                       dn2y4:
[1128]    09F5: C6 06 11 04 00                        mov drState, 00h
[1129]    09FA: B0 04                                 mov AL, 04h
[1130]    09FC: E6 C6                                 out bsrcreg, AL
[1131]        :                                       
[1132]    09FE: 59                                    pop cx
[1133]    09FF: 5B                                    pop bx
[1134]    0A00: 58                                    pop ax
[1135]    0A01: C3                                    ret
[1136]        :                                       
[1137]        :                                       
[1138]    0A02:                                       dn2y3:
[1139]    0A02: 80 FC 01                              cmp ah, 01
[1140]    0A05: 75 1D                                 jnz dn2y6
[1141]    0A07: 80 FF 01                              cmp bh, 1
[1142]    0A0A: 75 11                                 jnz dn2y7
[1143]        :                                       
[1144]        :                                       
[1145]    0A0C:                                       dn2y9:
[1146]    0A0C: 8A 0E 0E 04                           mov cl, dest
[1147]    0A10: 88 0E 0F 04                           mov secdest, cl
[1148]    0A14: C6 06 0E 04 01                        mov dest, 1
[1149]        :                                       
[1150]    0A19: 59                                    pop cx
[1151]    0A1A: 5B                                    pop bx
[1152]    0A1B: 58                                    pop ax
[1153]    0A1C: C3                                    ret
[1154]        :                                       
[1155]        :                                       
[1156]    0A1D:                                       dn2y7:
[1157]    0A1D: 80 FC 00                              cmp ah, 00
[1158]    0A20: 75 FB                                 jnz dn2y7
[1159]    0A22: EB 00                                 jmp dn2y6
[1160]        :                                       
[1161]        :                                       
[1162]    0A24:                                       dn2y6:
[1163]    0A24: 3C 02                                 cmp al, 02
[1164]    0A26: 74 03 E9 70 FF                        jnz dn2y11
[1165]        :                                       
[1166]    0A2B: C6 06 11 04 00                        mov drState, 00h
[1167]    0A30: B0 04                                 mov AL, 04h
[1168]    0A32: E6 C6                                 out bsrcreg, AL
[1169]        :                                       
[1170]    0A34: 59                                    pop cx
[1171]    0A35: 5B                                    pop bx
[1172]    0A36: 58                                    pop ax
[1173]    0A37: C3                                    ret
[1174]        :                                       down2 endp
[1175]        :                                       
[1176]        :                                       
[1177]        :                                       ; subroutine when lift0 is pressed
[1178]    0A38:                                       lift0 proc near
[1179]    0A38: 50                                    push ax
[1180]    0A39: 51                                    push cx
[1181]        :                                       
[1182]    0A3A: 80 3E 12 04 00                        cmp current, 0
[1183]    0A3F: 74 2D                                 jz a1
[1184]        :                                       
[1185]    0A41: C6 06 0E 04 00                        mov dest, 0
[1186]    0A46: C6 06 10 04 00                        mov dir, 0
[1187]    0A4B: B0 02                                 mov al, 02h
[1188]    0A4D: E6 C6                                 out bsrcreg, al
[1189]        :                                       
[1190]    0A4F: C6 06 11 04 01                        mov drState, 01h
[1191]    0A54: B0 05                                 mov AL, 05h
[1192]    0A56: E6 C6                                 out bsrcreg, AL
[1193]        :                                       
[1194]    0A58: B1 00                                 mov cl, 0
[1195]    0A5A: 80 F9 01                              q16:cmp cl, 1
[1196]    0A5D: 75 FB                                 jne q16
[1197]        :                                       
[1198]    0A5F: C6 06 0D 04 01                        mov liftMove, 1
[1199]    0A64: E8 AA 03                              call liftstar
[1200]        :                                       
[1201]        :                                       
[1202]        :                                       ; check if lift is moving or not
[1203]    0A67: 80 3E 0D 04 01                        a2: cmp liftMove, 1
[1204]    0A6C: 74 F9                                 jz a2
[1205]        :                                       
[1206]        :                                       
[1207]        :                                       ; secdest = 0 OR secdest = dest
[1208]    0A6E: B4 00                                 a1: mov ah, 0
[1209]    0A70: A0 0F 04                              mov al, secDest
[1210]    0A73: 80 3E 0F 04 00                        cmp secDest, 0
[1211]    0A78: 74 69                                 jz a3
[1212]        :                                       
[1213]    0A7A: FE C4                                 inc ah
[1214]    0A7C: 3A 06 0E 04                           cmp al, dest
[1215]    0A80: 74 61                                 jz a3
[1216]        :                                       
[1217]    0A82: FE C4                                 inc ah
[1218]    0A84: 80 FC 00                              cmp ah, 0
[1219]    0A87: 7D 00                                 jge a4
[1220]        :                                       
[1221]        :                                       
[1222]        :                                       ; secdest > dest
[1223]    0A89: A0 0F 04                              a4: mov al, secDest
[1224]    0A8C: 3A 06 0E 04                           cmp al, dest
[1225]    0A90: 7F 26                                 jg a5
[1226]        :                                       
[1227]    0A92: A2 0E 04                              mov dest, al
[1228]    0A95: C6 06 10 04 00                        mov dir, 0
[1229]    0A9A: B0 02                                 mov al, 02h
[1230]    0A9C: E6 C6                                 out bsrcreg, al
[1231]        :                                       
[1232]    0A9E: C6 06 11 04 01                        mov drState, 01h
[1233]    0AA3: B0 05                                 mov AL, 05h
[1234]    0AA5: E6 C6                                 out bsrcreg, AL
[1235]        :                                       
[1236]    0AA7: B1 00                                 mov cl, 0
[1237]    0AA9: 80 F9 01                              q17:cmp cl, 1
[1238]    0AAC: 75 FB                                 jne q17
[1239]        :                                       
[1240]    0AAE: C6 06 0D 04 01                        mov liftMove, 1
[1241]    0AB3: E8 5B 03                              call liftstar
[1242]    0AB6: EB 24                                 jmp a6
[1243]        :                                       
[1244]        :                                       
[1245]    0AB8: A2 0E 04                              a5: mov dest, al
[1246]    0ABB: C6 06 10 04 01                        mov dir, 01h
[1247]    0AC0: B0 03                                 mov AL, 03h
[1248]    0AC2: E6 C6                                 out bsrcreg, AL
[1249]        :                                       
[1250]    0AC4: C6 06 11 04 01                        mov drState, 01h
[1251]    0AC9: B0 05                                 mov AL, 05h
[1252]    0ACB: E6 C6                                 out bsrcreg, AL
[1253]        :                                       
[1254]    0ACD: B1 00                                 mov cl, 0
[1255]    0ACF: 80 F9 01                              q18:cmp cl, 1
[1256]    0AD2: 75 FB                                 jne q18
[1257]        :                                       
[1258]    0AD4: C6 06 0D 04 01                        mov liftMove, 1
[1259]    0AD9: E8 35 03                              call liftstar
[1260]        :                                       
[1261]        :                                       
[1262]    0ADC: 80 3E 0D 04 01                        a6: cmp liftMove, 1
[1263]    0AE1: 74 F9                                 jz a6
[1264]        :                                       
[1265]        :                                       
[1266]    0AE3: C6 06 0E 04 00                        a3: mov dest, 0
[1267]    0AE8: C6 06 10 04 00                        mov dir, 0
[1268]    0AED: B0 02                                 mov al, 02h
[1269]    0AEF: E6 C6                                 out bsrcreg, al
[1270]        :                                       
[1271]    0AF1: C6 06 11 04 01                        mov drState, 01h
[1272]    0AF6: B0 05                                 mov AL, 05h
[1273]    0AF8: E6 C6                                 out bsrcreg, AL
[1274]        :                                       
[1275]    0AFA: B1 00                                 mov cl, 0
[1276]    0AFC: 80 F9 01                              q19:cmp cl, 1
[1277]    0AFF: 75 FB                                 jne q19
[1278]        :                                       
[1279]    0B01: C6 06 0D 04 01                        mov liftMove, 01
[1280]    0B06: E8 08 03                              call liftstar
[1281]        :                                       
[1282]    0B09: 59                                    pop cx
[1283]    0B0A: 58                                    pop ax
[1284]    0B0B: C3                                    ret
[1285]        :                                       lift0 endp
[1286]        :                                       
[1287]        :                                       
[1288]        :                                       ; subroutine when lift1 is pressed
[1289]    0B0C:                                       lift1 proc near
[1290]    0B0C: 50                                    push ax
[1291]    0B0D: 80 3E 12 04 01                        cmp current, 1
[1292]    0B12: 74 5C                                 jz b1
[1293]        :                                       
[1294]        :                                       ; check if current floor = 0
[1295]    0B14: 80 3E 12 04 00                        cmp current, 0
[1296]    0B19: 74 28                                 jz b2
[1297]        :                                       
[1298]    0B1B: C6 06 0E 04 01                        mov dest, 1
[1299]    0B20: C6 06 10 04 00                        mov dir, 0
[1300]    0B25: B0 02                                 mov al, 02h
[1301]    0B27: E6 C6                                 out bsrcreg, al
[1302]        :                                       
[1303]    0B29: C6 06 11 04 01                        mov drState, 01h
[1304]    0B2E: B0 05                                 mov AL, 05h
[1305]    0B30: E6 C6                                 out bsrcreg, AL
[1306]        :                                       
[1307]    0B32: B1 00                                 mov cl, 0
[1308]    0B34: 80 F9 01                              q20:cmp cl, 1
[1309]    0B37: 75 FB                                 jne q20
[1310]        :                                       
[1311]    0B39: C6 06 0D 04 01                        mov liftMove, 01
[1312]    0B3E: E8 D0 02                              call liftstar
[1313]        :                                       
[1314]    0B41: EB 26                                 jmp b3
[1315]        :                                       
[1316]        :                                       
[1317]    0B43: C6 06 0E 04 01                        b2: mov dest, 1
[1318]    0B48: C6 06 10 04 01                        mov dir, 01h
[1319]    0B4D: B0 03                                 mov AL, 03h
[1320]    0B4F: E6 C6                                 out bsrcreg, AL
[1321]        :                                       
[1322]    0B51: C6 06 11 04 01                        mov drState, 01h
[1323]    0B56: B0 05                                 mov AL, 05h
[1324]    0B58: E6 C6                                 out bsrcreg, AL
[1325]        :                                       
[1326]    0B5A: B1 00                                 mov cl, 0
[1327]    0B5C: 80 F9 01                              q21:cmp cl, 1
[1328]    0B5F: 75 FB                                 jne q21
[1329]        :                                       
[1330]    0B61: C6 06 0D 04 01                        mov liftMove, 01
[1331]    0B66: E8 A8 02                              call liftstar
[1332]        :                                       
[1333]        :                                       
[1334]        :                                       ; check if lift is moving or not
[1335]    0B69: 80 3E 0D 04 01                        b3: cmp liftMove, 1
[1336]    0B6E: 74 F9                                 jz b3
[1337]        :                                       
[1338]        :                                       
[1339]        :                                       ; secdest = 0 OR secdest = dest
[1340]    0B70: B4 00                                 b1: mov ah, 0
[1341]    0B72: A0 0F 04                              mov al, secDest
[1342]    0B75: 80 3E 0F 04 00                        cmp secDest, 0
[1343]    0B7A: 74 69                                 jz b4
[1344]        :                                       
[1345]    0B7C: FE C4                                 inc ah
[1346]    0B7E: 3A 06 0E 04                           cmp al, dest
[1347]    0B82: 74 61                                 jz b4
[1348]        :                                       
[1349]    0B84: FE C4                                 inc ah
[1350]    0B86: 80 FC 00                              cmp ah, 0
[1351]    0B89: 7D 00                                 jge b5
[1352]        :                                       
[1353]        :                                       
[1354]        :                                       ; secdest > dest
[1355]    0B8B: A0 0F 04                              b5: mov al, secDest
[1356]    0B8E: 3A 06 0E 04                           cmp al, dest
[1357]    0B92: 7F 26                                 jg b6
[1358]        :                                       
[1359]    0B94: A2 0E 04                              mov dest, al
[1360]    0B97: C6 06 10 04 00                        mov dir, 0
[1361]    0B9C: B0 02                                 mov al, 02h
[1362]    0B9E: E6 C6                                 out bsrcreg, al
[1363]        :                                       
[1364]    0BA0: C6 06 11 04 01                        mov drState, 01h
[1365]    0BA5: B0 05                                 mov AL, 05h
[1366]    0BA7: E6 C6                                 out bsrcreg, AL
[1367]        :                                       
[1368]    0BA9: B1 00                                 mov cl, 0
[1369]    0BAB: 80 F9 01                              q22:cmp cl, 1
[1370]    0BAE: 75 FB                                 jne q22
[1371]        :                                       
[1372]    0BB0: C6 06 0D 04 01                        mov liftMove, 01
[1373]    0BB5: E8 59 02                              call liftstar
[1374]        :                                       
[1375]    0BB8: EB 24                                 jmp b7
[1376]        :                                       
[1377]        :                                       
[1378]    0BBA: A2 0E 04                              b6: mov dest, al
[1379]    0BBD: C6 06 10 04 01                        mov dir, 01h
[1380]    0BC2: B0 03                                 mov AL, 03h
[1381]    0BC4: E6 C6                                 out bsrcreg, AL
[1382]        :                                       
[1383]    0BC6: C6 06 11 04 01                        mov drState, 01h
[1384]    0BCB: B0 05                                 mov AL, 05h
[1385]    0BCD: E6 C6                                 out bsrcreg, AL
[1386]        :                                       
[1387]    0BCF: B1 00                                 mov cl, 0
[1388]    0BD1: 80 F9 01                              q23:cmp cl, 1
[1389]    0BD4: 75 FB                                 jne q23
[1390]        :                                       
[1391]    0BD6: C6 06 0D 04 01                        mov liftMove, 01
[1392]    0BDB: E8 33 02                              call liftstar
[1393]        :                                       
[1394]        :                                       
[1395]    0BDE: 80 3E 0D 04 01                        b7: cmp liftMove, 1
[1396]    0BE3: 74 F9                                 jz b7
[1397]        :                                       
[1398]        :                                       
[1399]    0BE5: C6 06 0E 04 00                        b4: mov dest, 0
[1400]    0BEA: C6 06 10 04 00                        mov dir, 0
[1401]    0BEF: B0 02                                 mov al, 02h
[1402]    0BF1: E6 C6                                 out bsrcreg, al
[1403]        :                                       
[1404]    0BF3: C6 06 11 04 01                        mov drState, 01h
[1405]    0BF8: B0 05                                 mov AL, 05h
[1406]    0BFA: E6 C6                                 out bsrcreg, AL
[1407]        :                                       
[1408]    0BFC: B1 00                                 mov cl, 0
[1409]    0BFE: 80 F9 01                              q24:cmp cl, 1
[1410]    0C01: 75 FB                                 jne q24
[1411]        :                                       
[1412]    0C03: C6 06 0D 04 01                        mov liftMove, 01
[1413]    0C08: E8 06 02                              call liftstar
[1414]        :                                       
[1415]    0C0B: 59                                    pop cx
[1416]    0C0C: 58                                    pop ax
[1417]    0C0D: C3                                    ret
[1418]        :                                       lift1 endp
[1419]        :                                       
[1420]        :                                       
[1421]        :                                       ; subroutine when lift2 is pressed
[1422]    0C0E:                                       lift2 proc near
[1423]    0C0E: 50                                    push ax
[1424]    0C0F: 51                                    push cx
[1425]        :                                       
[1426]    0C10: 80 3E 12 04 02                        cmp current, 2
[1427]    0C15: 74 5C                                 jz c1
[1428]        :                                       
[1429]        :                                       ; check if current floor = 3
[1430]    0C17: 80 3E 12 04 03                        cmp current, 3
[1431]    0C1C: 74 28                                 jz c2
[1432]        :                                       
[1433]    0C1E: C6 06 0E 04 02                        mov dest, 2
[1434]    0C23: C6 06 10 04 01                        mov dir, 01h
[1435]    0C28: B0 03                                 mov AL, 03h
[1436]    0C2A: E6 C6                                 out bsrcreg, AL
[1437]        :                                       
[1438]    0C2C: C6 06 11 04 01                        mov drState, 01h
[1439]    0C31: B0 05                                 mov AL, 05h
[1440]    0C33: E6 C6                                 out bsrcreg, AL
[1441]        :                                       
[1442]    0C35: B1 00                                 mov cl, 0
[1443]    0C37: 80 F9 01                              q25:cmp cl, 1
[1444]    0C3A: 75 FB                                 jne q25
[1445]        :                                       
[1446]    0C3C: C6 06 0D 04 01                        mov liftMove, 01
[1447]    0C41: E8 CD 01                              call liftstar
[1448]        :                                       
[1449]    0C44: EB 26                                 jmp c3
[1450]        :                                       
[1451]        :                                       
[1452]    0C46: C6 06 0E 04 02                        c2: mov dest, 2
[1453]    0C4B: C6 06 10 04 00                        mov dir, 0
[1454]    0C50: B0 02                                 mov al, 02h
[1455]    0C52: E6 C6                                 out bsrcreg, al
[1456]        :                                       
[1457]    0C54: C6 06 11 04 01                        mov drState, 01h
[1458]    0C59: B0 05                                 mov AL, 05h
[1459]    0C5B: E6 C6                                 out bsrcreg, AL
[1460]        :                                       
[1461]    0C5D: B1 00                                 mov cl, 0
[1462]    0C5F: 80 F9 01                              q26:cmp cl, 1
[1463]    0C62: 75 FB                                 jne q26
[1464]        :                                       
[1465]    0C64: C6 06 0D 04 01                        mov liftMove, 01
[1466]    0C69: E8 A5 01                              call liftstar
[1467]        :                                       
[1468]        :                                       
[1469]        :                                       ; check if lift is moving or not
[1470]    0C6C: 80 3E 0D 04 01                        c3: cmp liftMove, 1
[1471]    0C71: 74 F9                                 jz c3
[1472]        :                                       
[1473]        :                                       
[1474]        :                                       ; secdest = 0 OR secdest = dest
[1475]    0C73: B4 00                                 c1: mov ah, 0
[1476]    0C75: A0 0F 04                              mov al, secDest
[1477]    0C78: 80 3E 0F 04 00                        cmp secDest, 0
[1478]    0C7D: 74 69                                 jz c4
[1479]        :                                       
[1480]    0C7F: FE C4                                 inc ah
[1481]    0C81: 3A 06 0E 04                           cmp al, dest
[1482]    0C85: 74 61                                 jz c4
[1483]        :                                       
[1484]    0C87: FE C4                                 inc ah
[1485]    0C89: 80 FC 00                              cmp ah, 0
[1486]    0C8C: 7D 00                                 jge c5
[1487]        :                                       
[1488]        :                                       
[1489]        :                                       ; secdest > dest
[1490]    0C8E: A0 0F 04                              c5: mov al, secDest
[1491]    0C91: 3A 06 0E 04                           cmp al, dest
[1492]    0C95: 7F 26                                 jg c6
[1493]        :                                       
[1494]    0C97: A2 0E 04                              mov dest, al
[1495]    0C9A: C6 06 10 04 00                        mov dir, 0
[1496]    0C9F: B0 02                                 mov al, 02h
[1497]    0CA1: E6 C6                                 out bsrcreg, al
[1498]        :                                       
[1499]    0CA3: C6 06 11 04 01                        mov drState, 01h
[1500]    0CA8: B0 05                                 mov AL, 05h
[1501]    0CAA: E6 C6                                 out bsrcreg, AL
[1502]        :                                       
[1503]    0CAC: B1 00                                 mov cl, 0
[1504]    0CAE: 80 F9 01                              q27:cmp cl, 1
[1505]    0CB1: 75 FB                                 jne q27
[1506]        :                                       
[1507]    0CB3: C6 06 0D 04 01                        mov liftMove, 01
[1508]    0CB8: E8 56 01                              call liftstar
[1509]        :                                       
[1510]    0CBB: EB 24                                 jmp c7
[1511]        :                                       
[1512]        :                                       
[1513]    0CBD: A2 0E 04                              c6: mov dest, al
[1514]    0CC0: C6 06 10 04 01                        mov dir, 01h
[1515]    0CC5: B0 03                                 mov AL, 03h
[1516]    0CC7: E6 C6                                 out bsrcreg, AL
[1517]        :                                       
[1518]    0CC9: C6 06 11 04 01                        mov drState, 01h
[1519]    0CCE: B0 05                                 mov AL, 05h
[1520]    0CD0: E6 C6                                 out bsrcreg, AL
[1521]        :                                       
[1522]    0CD2: B1 00                                 mov cl, 0
[1523]    0CD4: 80 F9 01                              q28:cmp cl, 1
[1524]    0CD7: 75 FB                                 jne q28
[1525]        :                                       
[1526]    0CD9: C6 06 0D 04 01                        mov liftMove, 01
[1527]    0CDE: E8 30 01                              call liftstar
[1528]        :                                       
[1529]        :                                       
[1530]    0CE1: 80 3E 0D 04 01                        c7: cmp liftMove, 1
[1531]    0CE6: 74 F9                                 jz c7
[1532]        :                                       
[1533]        :                                       
[1534]    0CE8: C6 06 0E 04 00                        c4: mov dest, 0
[1535]    0CED: C6 06 10 04 00                        mov dir, 0
[1536]    0CF2: B0 02                                 mov al, 02h
[1537]    0CF4: E6 C6                                 out bsrcreg, al
[1538]        :                                       
[1539]    0CF6: C6 06 11 04 01                        mov drState, 01h
[1540]    0CFB: B0 05                                 mov AL, 05h
[1541]    0CFD: E6 C6                                 out bsrcreg, AL
[1542]        :                                       
[1543]    0CFF: B1 00                                 mov cl, 0
[1544]    0D01: 80 F9 01                              q29:cmp cl, 1
[1545]    0D04: 75 FB                                 jne q29
[1546]        :                                       
[1547]    0D06: C6 06 0D 04 01                        mov liftMove, 01
[1548]    0D0B: E8 03 01                              call liftstar
[1549]        :                                       
[1550]    0D0E: 59                                    pop cx
[1551]    0D0F: 58                                    pop ax
[1552]    0D10: C3                                    ret
[1553]        :                                       lift2 endp
[1554]        :                                       
[1555]        :                                       
[1556]        :                                       ; subroutine when lift3 is pressed
[1557]    0D11:                                       lift3 proc near
[1558]    0D11: 50                                    push ax
[1559]    0D12: 51                                    push cx
[1560]        :                                       
[1561]    0D13: 80 3E 12 04 03                        cmp current, 3
[1562]    0D18: 74 2D                                 jz d1
[1563]        :                                       
[1564]    0D1A: C6 06 0E 04 03                        mov dest, 3
[1565]    0D1F: C6 06 10 04 01                        mov dir, 01h
[1566]    0D24: B0 03                                 mov AL, 03h
[1567]    0D26: E6 C6                                 out bsrcreg, AL
[1568]        :                                       
[1569]    0D28: C6 06 11 04 01                        mov drState, 01h
[1570]    0D2D: B0 05                                 mov AL, 05h
[1571]    0D2F: E6 C6                                 out bsrcreg, AL
[1572]        :                                       
[1573]    0D31: B1 00                                 mov cl, 0
[1574]    0D33: 80 F9 01                              q30:cmp cl, 1
[1575]    0D36: 75 FB                                 jne q30
[1576]        :                                       
[1577]    0D38: C6 06 0D 04 01                        mov liftMove, 01
[1578]    0D3D: E8 D1 00                              call liftstar
[1579]        :                                       
[1580]        :                                       
[1581]        :                                       ; check if lift is moving or not
[1582]    0D40: 80 3E 0D 04 01                        d2: cmp liftMove, 1
[1583]    0D45: 74 F9                                 jz d2
[1584]        :                                       
[1585]        :                                       
[1586]        :                                       ; secdest = 0 OR secdest = dest
[1587]    0D47: B4 00                                 d1: mov ah, 0
[1588]    0D49: A0 0F 04                              mov al, secDest
[1589]    0D4C: 80 3E 0F 04 00                        cmp secDest, 0
[1590]    0D51: 74 69                                 jz d3
[1591]        :                                       
[1592]    0D53: FE C4                                 inc ah
[1593]    0D55: 3A 06 0E 04                           cmp al, dest
[1594]    0D59: 74 61                                 jz d3
[1595]        :                                       
[1596]    0D5B: FE C4                                 inc ah
[1597]    0D5D: 80 FC 00                              cmp ah, 0
[1598]    0D60: 7D 00                                 jge d4
[1599]        :                                       
[1600]        :                                       
[1601]        :                                       ; secdest > dest
[1602]    0D62: A0 0F 04                              d4: mov al, secDest
[1603]    0D65: 3A 06 0E 04                           cmp al, dest
[1604]    0D69: 7F 26                                 jg d5
[1605]        :                                       
[1606]    0D6B: A2 0E 04                              mov dest, al
[1607]    0D6E: C6 06 10 04 00                        mov dir, 0
[1608]    0D73: B0 02                                 mov al, 02h
[1609]    0D75: E6 C6                                 out bsrcreg, al
[1610]        :                                       
[1611]    0D77: C6 06 11 04 01                        mov drState, 01h
[1612]    0D7C: B0 05                                 mov AL, 05h
[1613]    0D7E: E6 C6                                 out bsrcreg, AL
[1614]        :                                       
[1615]    0D80: B1 00                                 mov cl, 0
[1616]    0D82: 80 F9 01                              q31:cmp cl, 1
[1617]    0D85: 75 FB                                 jne q31
[1618]        :                                       
[1619]    0D87: C6 06 0D 04 01                        mov liftMove, 01
[1620]    0D8C: E8 82 00                              call liftstar
[1621]        :                                       
[1622]    0D8F: EB 24                                 jmp d6
[1623]        :                                       
[1624]        :                                       
[1625]    0D91: A2 0E 04                              d5: mov dest, al
[1626]    0D94: C6 06 10 04 01                        mov dir, 01h
[1627]    0D99: B0 03                                 mov AL, 03h
[1628]    0D9B: E6 C6                                 out bsrcreg, AL
[1629]        :                                       
[1630]    0D9D: C6 06 11 04 01                        mov drState, 01h
[1631]    0DA2: B0 05                                 mov AL, 05h
[1632]    0DA4: E6 C6                                 out bsrcreg, AL
[1633]        :                                       
[1634]    0DA6: B1 00                                 mov cl, 0
[1635]    0DA8: 80 F9 01                              q32:cmp cl, 1
[1636]    0DAB: 75 FB                                 jne q32
[1637]        :                                       
[1638]    0DAD: C6 06 0D 04 01                        mov liftMove, 01
[1639]    0DB2: E8 5C 00                              call liftstar
[1640]        :                                       
[1641]        :                                       
[1642]    0DB5: 80 3E 0D 04 01                        d6: cmp liftMove, 1
[1643]    0DBA: 74 F9                                 jz d6
[1644]        :                                       
[1645]        :                                       
[1646]    0DBC: C6 06 0E 04 00                        d3: mov dest, 0
[1647]    0DC1: C6 06 10 04 00                        mov dir, 0
[1648]    0DC6: B0 02                                 mov al, 02h
[1649]    0DC8: E6 C6                                 out bsrcreg, al
[1650]        :                                       
[1651]    0DCA: C6 06 11 04 01                        mov drState, 01h
[1652]    0DCF: B0 05                                 mov AL, 05h
[1653]    0DD1: E6 C6                                 out bsrcreg, AL
[1654]        :                                       
[1655]    0DD3: B1 00                                 mov cl, 0
[1656]    0DD5: 80 F9 01                              q33:cmp cl, 1
[1657]    0DD8: 75 FB                                 jne q33
[1658]        :                                       
[1659]    0DDA: C6 06 0D 04 01                        mov liftMove, 01
[1660]    0DDF: E8 2F 00                              call liftstar
[1661]        :                                       
[1662]    0DE2: 59                                    pop cx
[1663]    0DE3: 58                                    pop ax
[1664]    0DE4: C3                                    ret
[1665]        :                                       lift3 endp
[1666]        :                                       
[1667]        :                                       
[1668]        :                                       ; subroutine when drClose is called
[1669]    0DE5:                                       drClose proc near
[1670]    0DE5: 50                                    push ax
[1671]        :                                       
[1672]    0DE6: C6 06 11 04 01                        mov drState, 01h
[1673]    0DEB: B0 05                                 mov AL, 05h
[1674]    0DED: E6 C6                                 out bsrcreg, AL
[1675]        :                                       
[1676]    0DEF: 58                                    pop ax
[1677]    0DF0: C3                                    ret
[1678]        :                                       drClose endp
[1679]        :                                       
[1680]        :                                       
[1681]        :                                       ; LED display logic
[1682]    0DF1:                                       ledDisp proc near
[1683]    0DF1: 50                                    push ax
[1684]        :                                       
[1685]    0DF2: A0 12 04                              mov al, current
[1686]    0DF5: E6 B0                                 out porta, al
[1687]        :                                       
[1688]    0DF7: 80 3E 0D 04 01                        cmp liftMove, 01
[1689]    0DFC: 75 02                                 jnz e1
[1690]        :                                       
[1691]    0DFE: E6 B2                                 out portb, al
[1692]        :                                       
[1693]        :                                       
[1694]    0E00: 80 3E 10 04 00                        e1: cmp dir, 00
[1695]    0E05: 75 04                                 jnz e2
[1696]        :                                       
[1697]    0E07: FE C8                                 dec al
[1698]    0E09: E6 B2                                 out portb, al
[1699]        :                                       
[1700]        :                                       
[1701]    0E0B: FE C0                                 e2: inc al
[1702]    0E0D: E6 B2                                 out portb, al
[1703]        :                                       
[1704]    0E0F: 58                                    pop ax
[1705]    0E10: C3                                    ret
[1706]        :                                       ledDisp endp
[1707]        :                                       
[1708]        :                                       
[1709]        :                                       ; start and accelaration routine 0% to 40%
[1710]    0E11:                                       liftstar proc near
[1711]    0E11: 50                                    push ax
[1712]    0E12: 51                                    push cx
[1713]        :                                       
[1714]    0E13: B0 08                                 mov AL,08h ; for 20% duty cycle
[1715]    0E15: E6 84                                 out pwm,AL
[1716]        :                                       
[1717]    0E17: B0 00                                 mov AL,00h ; first give a low on port PC0 (bsr) (0000 000 0b)
[1718]    0E19: E6 C6                                 out bsrcreg,AL
[1719]        :                                       
[1720]    0E1B: B0 01                                 mov AL,01h ; then give a high on port PC0 (bsr) to trigger one shot timer (0000 000 1b)
[1721]    0E1D: E6 C6                                 out bsrcreg,AL
[1722]        :                                       
[1723]    0E1F: B1 00                                 mov CL,00h
[1724]    0E21: 80 F9 01                              il1:cmp CL,01h ; infinite loop, waiting for ISR to set CL to 1
[1725]    0E24: 75 FB                                 jne il1
[1726]        :                                       
[1727]    0E26: B0 07                                 mov AL,07h ; 30% duty cycle
[1728]    0E28: E6 84                                 out pwm,AL
[1729]        :                                       
[1730]    0E2A: B0 00                                 mov AL,00h
[1731]    0E2C: E6 C6                                 out bsrcreg,AL
[1732]        :                                       
[1733]    0E2E: B0 01                                 mov AL,01h
[1734]    0E30: E6 C6                                 out bsrcreg,AL
[1735]        :                                       
[1736]    0E32: B1 00                                 mov CL,00h
[1737]    0E34: 80 F9 01                              il2:cmp CL,01h ; infinite loop, waiting for ISR to set CL to 1
[1738]    0E37: 75 FB                                 jne il2
[1739]        :                                       
[1740]    0E39: B0 06                                 mov AL,06h ; 40% duty cycle
[1741]    0E3B: E6 84                                 out pwm, AL
[1742]        :                                       
[1743]    0E3D: 59                                    pop cx
[1744]    0E3E: 58                                    pop ax
[1745]    0E3F: C3                                    ret
[1746]        :                                       liftstar endp
[1747]        :                                       
[1748]        :                                       
[1749]        :                                       ; accelaration to 50%
[1750]    0E40:                                       accel50 proc near
[1751]    0E40: 50                                    push ax
[1752]        :                                       
[1753]    0E41: B0 05                                 mov AL,05h ; 50% duty cycle
[1754]    0E43: E6 84                                 out pwm, AL
[1755]        :                                       
[1756]    0E45: 58                                    pop ax
[1757]    0E46: C3                                    ret
[1758]        :                                       accel50 endp
[1759]        :                                       
[1760]        :                                       
[1761]        :                                       ; decelaration routine from 50% to 20%
[1762]    0E47:                                       decel20 proc near
[1763]    0E47: 50                                    push ax
[1764]    0E48: 51                                    push cx
[1765]        :                                       
[1766]    0E49: B0 06                                 mov AL,06h ; 40%
[1767]    0E4B: E6 84                                 out pwm,AL
[1768]        :                                       
[1769]    0E4D: B0 00                                 mov AL,00h
[1770]    0E4F: E6 C6                                 out bsrcreg,AL
[1771]        :                                       
[1772]    0E51: B0 01                                 mov AL,01h
[1773]    0E53: E6 C6                                 out bsrcreg,AL
[1774]        :                                       
[1775]    0E55: B1 00                                 mov CL,00h
[1776]    0E57: 80 F9 01                              il3:cmp CL,01h
[1777]    0E5A: 75 FB                                 jne il3
[1778]        :                                       
[1779]    0E5C: B0 07                                 mov AL,07h ; 30%
[1780]    0E5E: E6 84                                 out pwm,AL
[1781]        :                                       
[1782]    0E60: B0 00                                 mov AL,00h
[1783]    0E62: E6 C6                                 out bsrcreg,AL
[1784]        :                                       
[1785]    0E64: B0 01                                 mov AL,01h
[1786]    0E66: E6 C6                                 out bsrcreg,AL
[1787]        :                                       
[1788]    0E68: B1 00                                 mov CL,00h
[1789]    0E6A: 80 F9 01                              il4:cmp CL,01h
[1790]    0E6D: 75 FB                                 jne il4
[1791]        :                                       
[1792]    0E6F: B0 08                                 mov AL,08h ; 20%
[1793]    0E71: E6 84                                 out pwm,AL
[1794]        :                                       
[1795]    0E73: 59                                    pop cx
[1796]    0E74: 58                                    pop ax
[1797]    0E75: C3                                    ret
[1798]        :                                       decel20 endp
[1799]        :                                       
[1800]        :                                       ; finally stop from 20% to 0
[1801]    0E76:                                       liftstop proc near
[1802]    0E76: 50                                    push ax
[1803]        :                                       
[1804]    0E77: B0 0A                                 mov AL,0ah
[1805]    0E79: E6 84                                 out pwm,AL
[1806]        :                                       
[1807]    0E7B: 58                                    pop ax
[1808]    0E7C: C3                                    ret
[1809]        :                                       liftstop endp
[1810]        :                                       
[1811]        :                                       
[1812]        :                                       
[1813]        :                                       		
[1814]        :                                       	
[1815]        :                                       
[1816]        :                                       
[1817]        :                                       		
[1818]        :                                       
[1819]        :                                       
[1820]        :                                       
[1821]        :                                       
[1822]        :                                       
[1823]        :                                       
[1824]        :                                       
[1825]        :                                       
[1826]        :                                       
[1827]        :                                       
[1828]        :                                       
[1829]        :                                       
[1830]        :                                       
[1831]        :                                       
 
===================================================================================================
 




===================================================================================================
